<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Plotting with quanteda • quanteda</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../jquery.sticky-kit.min.js"></script><script src="../../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../index.html">quanteda</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li>
  <a href="../../articles/index.html">Articles</a>
</li>
<li>
  <a href="../../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Plotting with quanteda</h1>
                        <h4 class="author">Kenneth Benoit, Adam Obeng, and Stefan Müller</h4>
            
          </div>

    
    
<div class="contents">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(quanteda)</code></pre></div>
<p>This vignette walks through various plot options available in <strong>quanteda</strong> through the <code>textplot_*</code> functions.</p>
<div id="wordcloud" class="section level2">
<h2 class="hasAnchor">
<a href="#wordcloud" class="anchor"></a>1. Wordcloud</h2>
<p>Plotting a <code>dfm</code> object will create a wordcloud using the <strong>wordcloud</strong> pacakge.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dfm_inaug &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, Year <span class="op">&lt;=</span><span class="st"> </span><span class="dv">1826</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(<span class="dt">remove =</span> <span class="kw"><a href="../../reference/stopwords.html">stopwords</a></span>(<span class="st">'english'</span>), <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw"><a href="../../reference/dfm_trim.html">dfm_trim</a></span>(<span class="dt">min_count =</span> <span class="dv">10</span>, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)

<span class="kw"><a href="../../reference/textplot_wordcloud.html">textplot_wordcloud</a></span>(dfm_inaug)</code></pre></div>
<p><img src="plotting_files/figure-html/unnamed-chunk-2-1.png" width="768"></p>
<p>You can also plot a “comparison cloud”, but this can only be done with fewer than eight documents:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, 
              President <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">"Washington"</span>, <span class="st">"Jefferson"</span>, <span class="st">"Madison"</span>)) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(<span class="dt">groups =</span> <span class="st">"President"</span>, <span class="dt">remove =</span> <span class="kw"><a href="../../reference/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>), <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw"><a href="../../reference/dfm_trim.html">dfm_trim</a></span>(<span class="dt">min_count =</span> <span class="dv">5</span>, <span class="dt">verbose =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw"><a href="../../reference/textplot_wordcloud.html">textplot_wordcloud</a></span>(<span class="dt">comparison =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p><img src="plotting_files/figure-html/unnamed-chunk-3-1.png" width="768"></p>
<p>Plot will pass through additional arguments to the underlying call to <code>wordcloud</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../../reference/textplot_wordcloud.html">textplot_wordcloud</a></span>(dfm_inaug, <span class="dt">min.freq =</span> <span class="dv">10</span>,
     <span class="dt">colors =</span> <span class="kw">c</span>(<span class="st">'red'</span>, <span class="st">'pink'</span>, <span class="st">'green'</span>, <span class="st">'purple'</span>, <span class="st">'orange'</span>, <span class="st">'blue'</span>))</code></pre></div>
<p><img src="plotting_files/figure-html/unnamed-chunk-4-1.png" width="768"></p>
</div>
<div id="lexical-dispersion-plot" class="section level2">
<h2 class="hasAnchor">
<a href="#lexical-dispersion-plot" class="anchor"></a>2. Lexical dispersion plot</h2>
<p>Plotting a <code>kwic</code> object produces a lexical dispersion plot which allows us to visualize the occurrences of particular terms throughout the text. We call these “x-ray” plots due to their similarity to the data produced by <a href="https://en.wikipedia.org/wiki/X-Ray_(Amazon_Kindle)">Amazon’s “x-ray” feature for Kindle books</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data_corpus_inaugural_subset &lt;-<span class="st"> </span>
<span class="st">    </span><span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, Year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1949</span>)
<span class="kw"><a href="../../reference/kwic.html">kwic</a></span>(data_corpus_inaugural_subset, <span class="dt">pattern =</span> <span class="st">"american"</span>) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw"><a href="../../reference/textplot_xray.html">textplot_xray</a></span>()</code></pre></div>
<p><img src="plotting_files/figure-html/unnamed-chunk-5-1.png" width="768"></p>
<p>You can also pass multiple kwic objects to <code>plot</code> to compare the dispersion of different terms:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../../reference/textplot_xray.html">textplot_xray</a></span>(
     <span class="kw"><a href="../../reference/kwic.html">kwic</a></span>(data_corpus_inaugural_subset, <span class="st">"american"</span>),
     <span class="kw"><a href="../../reference/kwic.html">kwic</a></span>(data_corpus_inaugural_subset, <span class="st">"people"</span>),
     <span class="kw"><a href="../../reference/kwic.html">kwic</a></span>(data_corpus_inaugural_subset, <span class="st">"communist"</span>)
)</code></pre></div>
<p><img src="plotting_files/figure-html/unnamed-chunk-6-1.png" width="768"></p>
<p>If you’re only plotting a single document, but with multiple keywords, then the keywords are displayed one below the other rather than side-by-side.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(readtext)</code></pre></div>
<pre><code>## Loading required package: readtext</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data_char_mobydick &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/texts.html">texts</a></span>(<span class="kw">readtext</span>(<span class="st">"http://www.gutenberg.org/cache/epub/2701/pg2701.txt"</span>))
<span class="kw"><a href="../../reference/textplot_xray.html">textplot_xray</a></span>(
    <span class="kw"><a href="../../reference/kwic.html">kwic</a></span>(data_char_mobydick, <span class="st">"whale"</span>),
    <span class="kw"><a href="../../reference/kwic.html">kwic</a></span>(data_char_mobydick, <span class="st">"ahab"</span>)
)</code></pre></div>
<p><img src="plotting_files/figure-html/unnamed-chunk-7-1.png" width="768"></p>
<p>You might also have noticed that the x-axis scale is the absolute token index for single texts and relative token index when multiple texts are being compared. If you prefer, you can specify that you want an absolute scale:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../../reference/textplot_xray.html">textplot_xray</a></span>(
    <span class="kw"><a href="../../reference/kwic.html">kwic</a></span>(data_corpus_inaugural_subset, <span class="st">"american"</span>),
    <span class="kw"><a href="../../reference/kwic.html">kwic</a></span>(data_corpus_inaugural_subset, <span class="st">"people"</span>),
    <span class="kw"><a href="../../reference/kwic.html">kwic</a></span>(data_corpus_inaugural_subset, <span class="st">"communist"</span>),
    <span class="dt">scale =</span> <span class="st">"absolute"</span>
)</code></pre></div>
<p><img src="plotting_files/figure-html/unnamed-chunk-8-1.png" width="768"></p>
<p>In this case, the texts may not have the same length, so the tokens that don’t exist in a particular text are shaded in grey.</p>
<div id="modifying-lexical-dispersion-plots" class="section level3">
<h3 class="hasAnchor">
<a href="#modifying-lexical-dispersion-plots" class="anchor"></a>Modifying lexical dispersion plots</h3>
<p>The object returned is a ggplot object, which can be modified using ggplot:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">"ggplot2"</span>)
<span class="kw">theme_set</span>(<span class="kw">theme_bw</span>())
g &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/textplot_xray.html">textplot_xray</a></span>(
    <span class="kw"><a href="../../reference/kwic.html">kwic</a></span>(data_corpus_inaugural_subset, <span class="st">"american"</span>),
    <span class="kw"><a href="../../reference/kwic.html">kwic</a></span>(data_corpus_inaugural_subset, <span class="st">"people"</span>),
    <span class="kw"><a href="../../reference/kwic.html">kwic</a></span>(data_corpus_inaugural_subset, <span class="st">"communist"</span>)
)
g <span class="op">+</span><span class="st"> </span><span class="kw">aes</span>(<span class="dt">color =</span> keyword) <span class="op">+</span><span class="st"> </span><span class="kw">scale_color_manual</span>(<span class="dt">values =</span> <span class="kw">c</span>(<span class="st">"blue"</span>, <span class="st">"red"</span>, <span class="st">"green"</span>))</code></pre></div>
<p><img src="plotting_files/figure-html/unnamed-chunk-9-1.png" width="768"></p>
</div>
</div>
<div id="frequency-plots" class="section level2">
<h2 class="hasAnchor">
<a href="#frequency-plots" class="anchor"></a>3. Frequency plots</h2>
<p>You can plot the frequency of the top features in a text using <code>topfeatures</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">features_dfm_inaug &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/textstat_frequency.html">textstat_frequency</a></span>(dfm_inaug, <span class="dt">n =</span> <span class="dv">100</span>)

<span class="co"># Sort by reverse frequency order</span>
features_dfm_inaug<span class="op">$</span>feature &lt;-<span class="st"> </span><span class="kw">with</span>(features_dfm_inaug, <span class="kw">reorder</span>(feature, <span class="op">-</span>frequency))

<span class="kw">ggplot</span>(features_dfm_inaug, <span class="kw">aes</span>(<span class="dt">x =</span> feature, <span class="dt">y =</span> frequency)) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">90</span>, <span class="dt">hjust =</span> <span class="dv">1</span>))</code></pre></div>
<p><img src="plotting_files/figure-html/unnamed-chunk-10-1.png" width="768"></p>
<p>If you wanted to compare the frequency of a single term across different texts, you can also use <code>textstat_frequency</code>, group the frequency by speech and extract the term.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Get frequency grouped by president</span>
freq_grouped &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/textstat_frequency.html">textstat_frequency</a></span>(<span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(data_corpus_inaugural_subset), 
                                   <span class="dt">groups =</span> <span class="st">"President"</span>)

<span class="co"># Filter the term "american"</span>
freq_american &lt;-<span class="st"> </span><span class="kw">subset</span>(freq_grouped, feature <span class="op">%in%</span><span class="st"> "american"</span>)  

<span class="kw">ggplot</span>(freq_american, <span class="kw">aes</span>(<span class="dt">x =</span> group, <span class="dt">y =</span> frequency)) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">14</span>), <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">14</span>, <span class="dv">2</span>))) <span class="op">+</span>
<span class="st">    </span><span class="kw">xlab</span>(<span class="ot">NULL</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">ylab</span>(<span class="st">"Frequency"</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">90</span>, <span class="dt">hjust =</span> <span class="dv">1</span>))</code></pre></div>
<p><img src="plotting_files/figure-html/unnamed-chunk-11-1.png" width="768"></p>
<p>The above plots are raw frequency plots. For relative frequency plots, (word count divided by the length of the chapter) we need to weight the document-frequency matrix first. To obtain expected word frequency per 100 words, we multiply by 100.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dfm_rel_freq &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm_weight.html">dfm_weight</a></span>(<span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(data_corpus_inaugural_subset), <span class="dt">type=</span><span class="st">'relFreq'</span>) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>
<span class="kw">head</span>(dfm_rel_freq)</code></pre></div>
<pre><code>## Document-feature matrix of: 6 documents, 6 features (13.9% sparse).
## 6 x 6 sparse Matrix of class "dfm"
##                  features
## docs                      my    friends        ,    before          i
##   1953-Eisenhower 0.14508524 0.14508524 4.570185 0.1813565 0.10881393
##   1957-Eisenhower 0.20714656 0.10357328 6.266183 0.1553599 0.05178664
##   1961-Kennedy    0.19157088 0.06385696 5.363985 0.1277139 0.31928480
##   1965-Johnson    0.17411492 0.05803831 5.513639 0.2321532 0.87057458
##   1969-Nixon      0.28723841 0          5.498564 0.1231022 0.86171522
##   1973-Nixon      0.04970179 0.04970179 4.771372 0.1988072 0.59642147
##                  features
## docs                   begin
##   1953-Eisenhower 0.03627131
##   1957-Eisenhower 0         
##   1961-Kennedy    0.19157088
##   1965-Johnson    0         
##   1969-Nixon      0         
##   1973-Nixon      0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rel_freq &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/textstat_frequency.html">textstat_frequency</a></span>(dfm_rel_freq, <span class="dt">groups =</span> <span class="st">"President"</span>)

<span class="co"># Filter the term "american"</span>
rel_freq_american &lt;-<span class="st"> </span><span class="kw">subset</span>(rel_freq, feature <span class="op">%in%</span><span class="st"> "american"</span>)  

<span class="kw">ggplot</span>(rel_freq_american, <span class="kw">aes</span>(<span class="dt">x =</span> group, <span class="dt">y =</span> frequency)) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.7</span>), <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="kw">seq</span>(<span class="dv">0</span>, <span class="fl">0.7</span>, <span class="fl">0.1</span>))) <span class="op">+</span>
<span class="st">    </span><span class="kw">xlab</span>(<span class="ot">NULL</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">ylab</span>(<span class="st">"Relative frequency"</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">90</span>, <span class="dt">hjust =</span> <span class="dv">1</span>))</code></pre></div>
<p><img src="plotting_files/figure-html/unnamed-chunk-12-1.png" width="768"></p>
<p>Finally, <code>texstat_frequency</code> allows to plot the most frequent words in terms of relative frequency by group.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dfm_weight_pres &lt;-<span class="st"> </span>data_corpus_inaugural <span class="op">%&gt;%</span>
<span class="st">     </span><span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(Year <span class="op">&gt;</span><span class="st"> </span><span class="dv">2000</span>) <span class="op">%&gt;%</span>
<span class="st">     </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(<span class="dt">remove =</span> <span class="kw"><a href="../../reference/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>), <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span>
<span class="st">     </span><span class="kw"><a href="../../reference/dfm_weight.html">dfm_weight</a></span>(<span class="dt">type =</span> <span class="st">"relfreq"</span>)

<span class="co"># Calculate relative frequency by president</span>
freq_weight &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/textstat_frequency.html">textstat_frequency</a></span>(dfm_weight_pres, <span class="dt">n =</span> <span class="dv">10</span>, <span class="dt">groups =</span> <span class="st">"President"</span>)

<span class="kw">ggplot</span>(<span class="dt">data =</span> freq_weight, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">nrow</span>(freq_weight)<span class="op">:</span><span class="dv">1</span>, <span class="dt">y =</span> frequency)) <span class="op">+</span>
<span class="st">     </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">     </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>group, <span class="dt">scales =</span> <span class="st">"free"</span>) <span class="op">+</span>
<span class="st">     </span><span class="kw">coord_flip</span>() <span class="op">+</span>
<span class="st">     </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">nrow</span>(freq_weight)<span class="op">:</span><span class="dv">1</span>,
                        <span class="dt">labels =</span> freq_weight<span class="op">$</span>feature) <span class="op">+</span>
<span class="st">     </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="st">"Relative frequency"</span>)</code></pre></div>
<p><img src="plotting_files/figure-html/unnamed-chunk-13-1.png" width="768"></p>
</div>
<div id="plot-keyness-in-a-target-and-reference-group" class="section level2">
<h2 class="hasAnchor">
<a href="#plot-keyness-in-a-target-and-reference-group" class="anchor"></a>4. Plot “keyness” in a target and reference group</h2>
<p>If you want to compare the differential associations of keywords in a target and reference group, you can calculate “keyness” which is based on <code>textstat_keyness</code>. In this example, we compare the inaugural speech by Donald Trump with the speeches by Barack Obama.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Only select speeches by Obama and Trump</span>
pres_corpus &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, 
                            President <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">"Obama"</span>, <span class="st">"Trump"</span>))

<span class="co"># Create a dfm grouped by president</span>
pres_dfm &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(pres_corpus, <span class="dt">groups =</span> <span class="st">"President"</span>, <span class="dt">remove =</span> <span class="kw"><a href="../../reference/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>), 
                <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)

<span class="co"># Calculate keyness and determine Trump as target group</span>
result_keyness &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/textstat_keyness.html">textstat_keyness</a></span>(pres_dfm, <span class="dt">target =</span> <span class="st">"Trump"</span>)

<span class="co"># Plot estimated word keyness</span>
<span class="kw"><a href="../../reference/textplot_keyness.html">textplot_keyness</a></span>(result_keyness) </code></pre></div>
<p><img src="plotting_files/figure-html/unnamed-chunk-14-1.png" width="768"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Plot without the reference text (in this case Obama)</span>
<span class="kw"><a href="../../reference/textplot_keyness.html">textplot_keyness</a></span>(result_keyness, <span class="dt">show_reference =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p><img src="plotting_files/figure-html/unnamed-chunk-14-2.png" width="768"></p>
</div>
<div id="plot-fitted-scaling-models" class="section level2">
<h2 class="hasAnchor">
<a href="#plot-fitted-scaling-models" class="anchor"></a>5. Plot fitted scaling models</h2>
<p>You can also plot fitted Wordscores (Laver et al., 2003) or Wordfish scaling models (Proksch and Slapin, 2008). To use the following functions, currently you need to download the development version of <strong>quanteda</strong>.</p>
<div id="wordscores" class="section level3">
<h3 class="hasAnchor">
<a href="#wordscores" class="anchor"></a>5.1 Wordscores</h3>
<p>Wordscores is a scaling procedure for estimating policy positions or scores (Laver et al., 2003). Known scores are assigned to so called reference texts in order to infer the positions of new documents (“virgin texts”). You can plot the position of words (features) against the logged term frequency, or the position of the documents.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Transform corpus to dfm</span>
ie_dfm &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(data_corpus_irishbudget2010, <span class="dt">verbose=</span><span class="ot">FALSE</span>)

<span class="co"># Set reference scores</span>
refscores &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(<span class="ot">NA</span>, <span class="dv">4</span>), <span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>, <span class="kw">rep</span>(<span class="ot">NA</span>, <span class="dv">8</span>))

<span class="co"># Predict Wordscores model</span>
ws &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/textmodel.html">textmodel</a></span>(ie_dfm, refscores, <span class="dt">model =</span> <span class="st">"wordscores"</span>, <span class="dt">smooth =</span> <span class="dv">1</span>)

<span class="co"># Get predictions</span>
pred &lt;-<span class="st"> </span><span class="kw">predict</span>(ws)

<span class="co"># Plot estimated word positions (highlight words and print them in red)</span>
<span class="kw"><a href="../../reference/textplot_scale1d.html">textplot_scale1d</a></span>(pred, <span class="dt">margin =</span> <span class="st">"features"</span>, 
                 <span class="dt">highlighted =</span> <span class="kw">c</span>(<span class="st">"minister"</span>, <span class="st">"have"</span>, <span class="st">"our"</span>, <span class="st">"budget"</span>), 
                 <span class="dt">highlighted_color =</span> <span class="st">"red"</span>)</code></pre></div>
<p><img src="plotting_files/figure-html/unnamed-chunk-15-1.png" width="768"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Set document labels for y-axis</span>
doclab &lt;-<span class="st"> </span><span class="kw">apply</span>(<span class="kw"><a href="../../reference/docvars.html">docvars</a></span>(data_corpus_irishbudget2010, <span class="kw">c</span>(<span class="st">"name"</span>, <span class="st">"party"</span>)), 
                <span class="dv">1</span>, paste, <span class="dt">collapse =</span> <span class="st">" "</span>)

<span class="co"># Plot estimated document positions and group by "party" variable</span>
<span class="kw"><a href="../../reference/textplot_scale1d.html">textplot_scale1d</a></span>(pred, <span class="dt">margin =</span> <span class="st">"documents"</span>,
                 <span class="dt">doclabels =</span> doclab,
                 <span class="dt">groups =</span> <span class="kw"><a href="../../reference/docvars.html">docvars</a></span>(data_corpus_irishbudget2010, <span class="st">"party"</span>))</code></pre></div>
<p><img src="plotting_files/figure-html/unnamed-chunk-15-2.png" width="768"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Plot estimated document positions using the LBG transformation and group by "party" variable</span>

pred_lbg &lt;-<span class="st"> </span><span class="kw">predict</span>(ws, <span class="dt">rescaling =</span> <span class="st">"lbg"</span>)

<span class="kw"><a href="../../reference/textplot_scale1d.html">textplot_scale1d</a></span>(pred_lbg, <span class="dt">margin =</span> <span class="st">"documents"</span>,
                 <span class="dt">doclabels =</span> doclab,
                 <span class="dt">groups =</span> <span class="kw"><a href="../../reference/docvars.html">docvars</a></span>(data_corpus_irishbudget2010, <span class="st">"party"</span>))</code></pre></div>
<p><img src="plotting_files/figure-html/unnamed-chunk-15-3.png" width="768"></p>
</div>
<div id="wordfish" class="section level3">
<h3 class="hasAnchor">
<a href="#wordfish" class="anchor"></a>5.2 Wordfish</h3>
<p>Wordfish is a Poisson scaling model that estimates one-dimension document positions using maximum likelihood (Slapin and Proksch, 2008). Both the estimated position of words and the positions of the documents can be plotted.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Estimate Wordfish model</span>
wfm &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/textmodel_wordfish.html">textmodel_wordfish</a></span>(<span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(data_corpus_irishbudget2010), <span class="dt">dir =</span> <span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">5</span>))

<span class="co"># Plot estimated word positions</span>
<span class="kw"><a href="../../reference/textplot_scale1d.html">textplot_scale1d</a></span>(wfm, <span class="dt">margin =</span> <span class="st">"features"</span>, 
                 <span class="dt">highlighted =</span> <span class="kw">c</span>(<span class="st">"government"</span>, <span class="st">"global"</span>, <span class="st">"children"</span>, 
                                 <span class="st">"bank"</span>, <span class="st">"economy"</span>, <span class="st">"the"</span>, <span class="st">"citizenship"</span>,
                                 <span class="st">"productivity"</span>, <span class="st">"deficit"</span>), 
                 <span class="dt">highlighted_color =</span> <span class="st">"red"</span>)</code></pre></div>
<p><img src="plotting_files/figure-html/unnamed-chunk-16-1.png" width="768"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Plot estimated document positions</span>
<span class="kw"><a href="../../reference/textplot_scale1d.html">textplot_scale1d</a></span>(wfm, <span class="dt">doclabels =</span> doclab,
                 <span class="dt">groups =</span> <span class="kw"><a href="../../reference/docvars.html">docvars</a></span>(data_corpus_irishbudget2010, <span class="st">"party"</span>))</code></pre></div>
<p><img src="plotting_files/figure-html/unnamed-chunk-16-2.png" width="768"></p>
</div>
<div id="correspondence-analysis" class="section level3">
<h3 class="hasAnchor">
<a href="#correspondence-analysis" class="anchor"></a>5.3 Correspondence Analysis</h3>
<p>You can also plot the estimated document positions of a correspodence analysis (Nenadic and Greenacre 2007).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Transform corpus to dfm</span>
ie_dfm &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(data_corpus_irishbudget2010)

<span class="co"># Run correspondence analysis on dfm</span>
wca &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/textmodel_ca.html">textmodel_ca</a></span>(ie_dfm)

<span class="co"># Create doclabels for y-axis</span>
doclab &lt;-<span class="st"> </span><span class="kw">apply</span>(<span class="kw"><a href="../../reference/docvars.html">docvars</a></span>(data_corpus_irishbudget2010, <span class="kw">c</span>(<span class="st">"name"</span>, <span class="st">"party"</span>)), 
                <span class="dv">1</span>, paste, <span class="dt">collapse =</span> <span class="st">" "</span>)

<span class="co"># Plot estimated positions and group by party</span>
<span class="kw"><a href="../../reference/textplot_scale1d.html">textplot_scale1d</a></span>(wca, <span class="dt">margin =</span> <span class="st">"documents"</span>,
                 <span class="dt">doclabels =</span> doclab,
                 <span class="dt">groups =</span> <span class="kw"><a href="../../reference/docvars.html">docvars</a></span>(data_corpus_irishbudget2010, <span class="st">"party"</span>))</code></pre></div>
<p><img src="plotting_files/figure-html/unnamed-chunk-17-1.png" width="672"></p>
</div>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<p>Laver, Michael, Kenneth Benoit, and John Garry. 2003. “Extracting Policy Positions from Political Texts Using Words as Data.” <em>American Political Science Review</em> 97(2):311-331.</p>
<p>Nenadic, Oleg, and Michael Greenacre. 2007. “Correspondence analysis in R, with two- and three-dimensional graphics: The ca package.” <em>Journal of Statistical Software</em> 20(3): 1-13. URL: <a href="http://www.jstatsoft.org/v20/i03/" class="uri">http://www.jstatsoft.org/v20/i03/</a>.</p>
<p>Slapin, Jonathan, and Sven-Oliver Proksch. 2008. “A Scaling Model for Estimating Time-Series Party Positions from Texts.” <em>American Journal of Political Science</em> 52(3):705-772.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#wordcloud">1. Wordcloud</a></li>
      <li><a href="#lexical-dispersion-plot">2. Lexical dispersion plot</a></li>
      <li><a href="#frequency-plots">3. Frequency plots</a></li>
      <li><a href="#plot-keyness-in-a-target-and-reference-group">4. Plot “keyness” in a target and reference group</a></li>
      <li><a href="#plot-fitted-scaling-models">5. Plot fitted scaling models</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Kenneth Benoit.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>

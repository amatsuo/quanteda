<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting Started with quanteda • quanteda</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">quanteda</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/pkgdown_only/comparison-packages.html">Comparing quanteda to other packages</a>
    </li>
    <li>
      <a href="../articles/pkgdown_only/design.html">quanteda Structure and Design</a>
    </li>
    <li>
      <a href="../articles/pkgdown_only/LitVignette.html">Replicating *Text Analysis with R for Students of Literature*</a>
    </li>
    <li>
      <a href="../articles/pkgdown_only/plotting.html">Plotting with quanteda</a>
    </li>
    <li>
      <a href="../articles/quickstart.html">Getting Started with quanteda</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Getting Started with quanteda</h1>
            
          </div>

    
    
<div class="contents">
<p>This vignette provides a basic overview of <strong>quanteda</strong>’s features and capabilities. For additional vignettes, see the <a href="http://docs.quanteda.io/articles/index.html">articles at quanteda.io</a>.</p>
<section id="introduction" class="level1"><h1>Introduction</h1>
<p>An R package for managing and analyzing text.</p>
<p><strong>quanteda</strong> makes it easy to manage texts in the form of a corpus, defined as a collection of texts that includes document-level variables specific to each text, as well as meta-data for documents and for the collection as a whole. <strong>quanteda</strong> includes tools to make it easy and fast to manuipulate the texts in a corpus, by performing the most common natural language processing tasks simply and quickly, such as tokenizing, stemming, or forming ngrams. <strong>quanteda</strong>’s functions for tokenizing texts and forming multiple tokenized documents into a <em>document-feature matrix</em> are both extremely fast and extremely simple to use. <strong>quanteda</strong> can segment texts easily by words, paragraphs, sentences, or even user-supplied delimiters and tags.</p>
<p>Built on the text processing functions in the <strong>stringi</strong> package, which is in turn built on C++ implementation of the <a href="http://www.icu-project.org/">ICU</a> libraries for Unicode text handling, <strong>quanteda</strong> pays special attention to fast and correct implementation of Unicode and the handling of text in any character set, following conversion internally to UTF-8.</p>
<p><strong>quanteda</strong> is built for efficiency and speed, through its design around three infrastructures: the <strong>stringi</strong> package for text processing, the <strong>data.table</strong> package for indexing large documents efficiently, and the <strong>Matrix</strong> package for sparse matrix objects. If you can fit it into memory, <strong>quanteda</strong> will handle it quickly. (And eventually, we will make it possible to process objects even larger than available memory.)</p>
<p><strong>quanteda</strong> is principally designed to allow users a fast and convenient method to go from a corpus of texts to a selected matrix of documents by features, after defining what the documents and features. The package makes it easy to redefine documents, for instance by splitting them into sentences or paragraphs, or by tags, as well as to group them into larger documents by document variables, or to subset them based on logical conditions or combinations of document variables. The package also implements common NLP feature selection functions, such as removing stopwords and stemming in numerous languages, selecting words found in dictionaries, treating words as equivalent based on a user-defined “thesaurus”, and trimming and weighting features based on document frequency, feature frequency, and related measures such as <em>tf-idf</em>.</p>
</section><section id="quanteda-features" class="level1"><h1>quanteda Features</h1>
<section id="corpus-management-tools" class="level2"><h2>Corpus management tools</h2>
<p>The tools for getting texts into a corpus object include:</p>
<ul>
<li>loading texts from directories of individual files</li>
<li>loading texts ``manually’’ by inserting them into a corpus using helper functions</li>
<li>managing text encodings and conversions from source files into corpus texts</li>
<li>attaching variables to each text that can be used for grouping, reorganizing a corpus, or simply recording additional information to supplement quantitative analyses with non-textual data</li>
<li>recording meta-data about the sources and creation details for the corpus.</li>
</ul>
<p>The tools for working with a corpus include:</p>
<ul>
<li>summarizing the corpus in terms of its language units</li>
<li>reshaping the corpus into smaller units or more aggregated units</li>
<li>adding to or extracting subsets of a corpus</li>
<li>resampling texts of the corpus, for example for use in non-parametric bootstrapping of the texts</li>
<li>Easy extraction and saving, as a new data frame or corpus, key words in context (KWIC)</li>
</ul></section><section id="natural-language-processing-tools" class="level2"><h2>Natural-Language Processing tools</h2>
<p>For extracting features from a corpus, <code>quanteda</code> provides the following tools:</p>
<ul>
<li>extraction of word types</li>
<li>extraction of word n-grams</li>
<li>extraction of dictionary entries from user-defined dictionaries</li>
<li>feature selection through
<ul>
<li>stemming</li>
<li>random selection</li>
<li>document frequency</li>
<li>word frequency</li>
</ul>
</li>
<li>and a variety of options for cleaning word types, such as capitalization and rules for handling punctuation.</li>
</ul></section><section id="document-feature-matrix-analysis-tools" class="level2"><h2>Document-Feature Matrix analysis tools</h2>
<p>For analyzing the resulting <em>document-feature</em> matrix created when features are abstracted from a corpus, <code>quanteda</code> provides:</p>
<ul>
<li>scaling methods, such as correspondence analysis, Wordfish, and Wordscores</li>
<li>topic models, such as LDA</li>
<li>classifiers, such as Naive Bayes or k-nearest neighbour</li>
<li>sentiment analysis, using dictionaries</li>
</ul></section><section id="additional-and-planned-features" class="level2"><h2>Additional and planned features</h2>
<p><strong>Additional features</strong> of quanteda include:</p>
<ul>
<li><p>the ability to explore texts using <em>key-words-in-context</em>;</p></li>
<li><p>fast computation of a variety of readability indexes;</p></li>
<li><p>fast computation of a variety of lexical diversity measures;</p></li>
<li><p>quick computation of word or document association measures, for clustering or to compute similarity scores for other purposes; and</p></li>
<li><p>a comprehensive suite of descriptive statistics on text such as the number of sentences, words, characters, or syllables per document.</p></li>
</ul>
<p><strong>Planned features</strong> coming soon to <strong>quanteda</strong> are:</p>
<ul>
<li>bootstrapping methods for texts that makes it easy to resample texts from pre-defined units, to facilitate computation of confidence intervals on textual statistics using techniques of non-parametric bootstrapping, but applied to the original texts as data.</li>
</ul></section><section id="working-with-other-text-analysis-packages" class="level2"><h2>Working with other text analysis packages</h2>
<p><code>quanteda</code> is hardly unique in providing facilities for working with text – the excellent <em>tm</em> package already provides many of the features we have described. <code>quanteda</code> is designed to complement those packages, as well to simplify the implementation of the text-to-analysis workflow. <code>quanteda</code> corpus structures are simpler objects than in <em>tm</em>s, as are the document-feature matrix objects from <code>quanteda</code>, compared to the sparse matrix implementation found in <em>tm</em>. However, there is no need to choose only one package, since we provide translator functions from one matrix or corpus object to the other in <code>quanteda</code>.</p>
<p>Once constructed, a <strong>quanteda</strong> “dfm”" can be easily passed to other text-analysis packages for additional analysis of topic models or scaling, such as:</p>
<ul>
<li><p>topic models (including converters for direct use with the <strong>topicmodels</strong>, <strong>LDA</strong>, and <strong>stm</strong> packages)</p></li>
<li><p>document scaling using <strong>quanteda</strong>’s own functions for the “wordfish” and “Wordscores” models, and a sparse method for correspondence analysis</p></li>
<li><p>document classification methods, using (for example) Naive Bayes, k-nearest neighbour, or Support Vector Machines</p></li>
<li><p>more sophisticated machine learning through a variety of other packages that take matrix or matrix-like inputs.</p></li>
<li><p>graphical analysis, including word clouds and strip plots for selected themes or words.</p></li>
</ul></section></section><section id="how-to-install" class="level1"><h1>How to Install</h1>
<p>Through a normal installation of the package from CRAN, or for the GitHub version, see the installation instructions at <a href="https://github.com/kbenoit/quanteda" class="uri">https://github.com/kbenoit/quanteda</a>.</p>
</section><section id="creating-and-working-with-a-corpus" class="level1"><h1>Creating and Working with a Corpus</h1>
<pre class="sourceCode r" id="cb1"><code class="sourceCode r"><div class="sourceLine" id="cb1-1" data-line-number="1">
<span class="kw">require</span>(quanteda)</div>
<div class="sourceLine" id="cb1-2" data-line-number="2">## Loading required package: quanteda</div>
<div class="sourceLine" id="cb1-3" data-line-number="3">## quanteda version 0.99.22</div>
<div class="sourceLine" id="cb1-4" data-line-number="4">## Using 7 of 8 threads for parallel computing</div>
<div class="sourceLine" id="cb1-5" data-line-number="5">## </div>
<div class="sourceLine" id="cb1-6" data-line-number="6">## Attaching package: 'quanteda'</div>
<div class="sourceLine" id="cb1-7" data-line-number="7">## The following object is masked from 'package:utils':</div>
<div class="sourceLine" id="cb1-8" data-line-number="8">## </div>
<div class="sourceLine" id="cb1-9" data-line-number="9">##     View</div></code></pre>
<section id="currently-available-corpus-sources" class="level2"><h2>Currently available corpus sources</h2>
<p><strong>quanteda</strong> has a simple and powerful companion package for loading texts: <a href="https://github.com/kbenoit/readtext"><strong>readtext</strong></a>. The main function in this package, <code><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext()</a></code>, takes a file or fileset from disk or a URL, and returns a type of data.frame that can be used directly with the <code><a href="../reference/corpus.html">corpus()</a></code> constructor function, to create a <strong>quanteda</strong> corpus object.</p>
<p><code><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext()</a></code> works on:</p>
<ul>
<li>text (<code>.txt</code>) files;</li>
<li>comma-separated-value (<code>.csv</code>) files;</li>
<li>XML formatted data;</li>
<li>data from the Facebook API, in JSON format;</li>
<li>data from the Twitter API, in JSON format; and</li>
<li>generic JSON data.</li>
</ul>
<p>The corpus constructor command <code><a href="../reference/corpus.html">corpus()</a></code> works directly on:</p>
<ul>
<li>a vector of character objects, for instance that you have already loaded into the workspace using other tools;</li>
<li>a <code>VCorpus</code> corpus object from the <strong>tm</strong> package.</li>
<li>a data.frame containing a text column and any other document-level metadata.</li>
</ul>
<section id="example-building-a-corpus-from-a-character-vector" class="level3"><h3>Example: building a corpus from a character vector</h3>
<p>The simplest case is to create a corpus from a vector of texts already in memory in R. This gives the advanced R user complete flexbility with his or her choice of text inputs, as there are almost endless ways to get a vector of texts into R.</p>
<p>If we already have the texts in this form, we can call the corpus constructor function directly. We can demonstrate this on the built-in character object of the texts about immigration policy extracted from the 2010 election manifestos of the UK political parties (called <code>data_char_ukimmig2010</code>).</p>
<pre class="sourceCode r" id="cb2"><code class="sourceCode r"><div class="sourceLine" id="cb2-1" data-line-number="1">myCorpus &lt;-<span class="st"> </span><span class="kw"><a href="../reference/corpus.html">corpus</a></span>(data_char_ukimmig2010)  <span class="co"># build a new corpus from the texts</span>
</div>
<div class="sourceLine" id="cb2-2" data-line-number="2">
<span class="kw">summary</span>(myCorpus)</div>
<div class="sourceLine" id="cb2-3" data-line-number="3">## Corpus consisting of 9 documents:</div>
<div class="sourceLine" id="cb2-4" data-line-number="4">## </div>
<div class="sourceLine" id="cb2-5" data-line-number="5">##          Text Types Tokens Sentences</div>
<div class="sourceLine" id="cb2-6" data-line-number="6">##           BNP  1125   3280        88</div>
<div class="sourceLine" id="cb2-7" data-line-number="7">##     Coalition   142    260         4</div>
<div class="sourceLine" id="cb2-8" data-line-number="8">##  Conservative   251    499        15</div>
<div class="sourceLine" id="cb2-9" data-line-number="9">##        Greens   322    679        21</div>
<div class="sourceLine" id="cb2-10" data-line-number="10">##        Labour   298    683        29</div>
<div class="sourceLine" id="cb2-11" data-line-number="11">##        LibDem   251    483        14</div>
<div class="sourceLine" id="cb2-12" data-line-number="12">##            PC    77    114         5</div>
<div class="sourceLine" id="cb2-13" data-line-number="13">##           SNP    88    134         4</div>
<div class="sourceLine" id="cb2-14" data-line-number="14">##          UKIP   346    723        27</div>
<div class="sourceLine" id="cb2-15" data-line-number="15">## </div>
<div class="sourceLine" id="cb2-16" data-line-number="16">## Source:  /Users/kbenoit/GitHub/quanteda/docs/articles/* on x86_64 by kbenoit</div>
<div class="sourceLine" id="cb2-17" data-line-number="17">## Created: Fri Nov 17 09:11:04 2017</div>
<div class="sourceLine" id="cb2-18" data-line-number="18">## Notes:</div></code></pre>
<p>If we wanted, we could add some document-level variables – what quanteda calls <code>docvars</code> – to this corpus.</p>
<p>We can do this using the R’s <code>names()</code> function to get the names of the character vector <code>data_char_ukimmig2010</code>, and assign this to a document variable (<code>docvar</code>).</p>
<pre class="sourceCode r" id="cb3"><code class="sourceCode r"><div class="sourceLine" id="cb3-1" data-line-number="1">
<span class="kw"><a href="../reference/docvars.html">docvars</a></span>(myCorpus, <span class="st">"Party"</span>) &lt;-<span class="st"> </span><span class="kw">names</span>(data_char_ukimmig2010)</div>
<div class="sourceLine" id="cb3-2" data-line-number="2">
<span class="kw"><a href="../reference/docvars.html">docvars</a></span>(myCorpus, <span class="st">"Year"</span>) &lt;-<span class="st"> </span><span class="dv">2010</span>
</div>
<div class="sourceLine" id="cb3-3" data-line-number="3">
<span class="kw">summary</span>(myCorpus)</div>
<div class="sourceLine" id="cb3-4" data-line-number="4">## Corpus consisting of 9 documents:</div>
<div class="sourceLine" id="cb3-5" data-line-number="5">## </div>
<div class="sourceLine" id="cb3-6" data-line-number="6">##          Text Types Tokens Sentences        Party Year</div>
<div class="sourceLine" id="cb3-7" data-line-number="7">##           BNP  1125   3280        88          BNP 2010</div>
<div class="sourceLine" id="cb3-8" data-line-number="8">##     Coalition   142    260         4    Coalition 2010</div>
<div class="sourceLine" id="cb3-9" data-line-number="9">##  Conservative   251    499        15 Conservative 2010</div>
<div class="sourceLine" id="cb3-10" data-line-number="10">##        Greens   322    679        21       Greens 2010</div>
<div class="sourceLine" id="cb3-11" data-line-number="11">##        Labour   298    683        29       Labour 2010</div>
<div class="sourceLine" id="cb3-12" data-line-number="12">##        LibDem   251    483        14       LibDem 2010</div>
<div class="sourceLine" id="cb3-13" data-line-number="13">##            PC    77    114         5           PC 2010</div>
<div class="sourceLine" id="cb3-14" data-line-number="14">##           SNP    88    134         4          SNP 2010</div>
<div class="sourceLine" id="cb3-15" data-line-number="15">##          UKIP   346    723        27         UKIP 2010</div>
<div class="sourceLine" id="cb3-16" data-line-number="16">## </div>
<div class="sourceLine" id="cb3-17" data-line-number="17">## Source:  /Users/kbenoit/GitHub/quanteda/docs/articles/* on x86_64 by kbenoit</div>
<div class="sourceLine" id="cb3-18" data-line-number="18">## Created: Fri Nov 17 09:11:04 2017</div>
<div class="sourceLine" id="cb3-19" data-line-number="19">## Notes:</div></code></pre>
<p>If we wanted to tag each document with additional meta-data not considered a document variable of interest for analysis, but rather something that we need to know as an attribute of the document, we could also add those to our corpus.</p>
<pre class="sourceCode r" id="cb4"><code class="sourceCode r"><div class="sourceLine" id="cb4-1" data-line-number="1">
<span class="kw"><a href="../reference/metadoc.html">metadoc</a></span>(myCorpus, <span class="st">"language"</span>) &lt;-<span class="st"> "english"</span>
</div>
<div class="sourceLine" id="cb4-2" data-line-number="2">
<span class="kw"><a href="../reference/metadoc.html">metadoc</a></span>(myCorpus, <span class="st">"docsource"</span>)  &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">"data_char_ukimmig2010"</span>, <span class="dv">1</span><span class="op">:</span><span class="kw"><a href="../reference/ndoc.html">ndoc</a></span>(myCorpus), <span class="dt">sep =</span> <span class="st">"_"</span>)</div>
<div class="sourceLine" id="cb4-3" data-line-number="3">
<span class="kw">summary</span>(myCorpus, <span class="dt">showmeta =</span> <span class="ot">TRUE</span>)</div>
<div class="sourceLine" id="cb4-4" data-line-number="4">## Corpus consisting of 9 documents:</div>
<div class="sourceLine" id="cb4-5" data-line-number="5">## </div>
<div class="sourceLine" id="cb4-6" data-line-number="6">##          Text Types Tokens Sentences        Party Year _language</div>
<div class="sourceLine" id="cb4-7" data-line-number="7">##           BNP  1125   3280        88          BNP 2010   english</div>
<div class="sourceLine" id="cb4-8" data-line-number="8">##     Coalition   142    260         4    Coalition 2010   english</div>
<div class="sourceLine" id="cb4-9" data-line-number="9">##  Conservative   251    499        15 Conservative 2010   english</div>
<div class="sourceLine" id="cb4-10" data-line-number="10">##        Greens   322    679        21       Greens 2010   english</div>
<div class="sourceLine" id="cb4-11" data-line-number="11">##        Labour   298    683        29       Labour 2010   english</div>
<div class="sourceLine" id="cb4-12" data-line-number="12">##        LibDem   251    483        14       LibDem 2010   english</div>
<div class="sourceLine" id="cb4-13" data-line-number="13">##            PC    77    114         5           PC 2010   english</div>
<div class="sourceLine" id="cb4-14" data-line-number="14">##           SNP    88    134         4          SNP 2010   english</div>
<div class="sourceLine" id="cb4-15" data-line-number="15">##          UKIP   346    723        27         UKIP 2010   english</div>
<div class="sourceLine" id="cb4-16" data-line-number="16">##               _docsource</div>
<div class="sourceLine" id="cb4-17" data-line-number="17">##  data_char_ukimmig2010_1</div>
<div class="sourceLine" id="cb4-18" data-line-number="18">##  data_char_ukimmig2010_2</div>
<div class="sourceLine" id="cb4-19" data-line-number="19">##  data_char_ukimmig2010_3</div>
<div class="sourceLine" id="cb4-20" data-line-number="20">##  data_char_ukimmig2010_4</div>
<div class="sourceLine" id="cb4-21" data-line-number="21">##  data_char_ukimmig2010_5</div>
<div class="sourceLine" id="cb4-22" data-line-number="22">##  data_char_ukimmig2010_6</div>
<div class="sourceLine" id="cb4-23" data-line-number="23">##  data_char_ukimmig2010_7</div>
<div class="sourceLine" id="cb4-24" data-line-number="24">##  data_char_ukimmig2010_8</div>
<div class="sourceLine" id="cb4-25" data-line-number="25">##  data_char_ukimmig2010_9</div>
<div class="sourceLine" id="cb4-26" data-line-number="26">## </div>
<div class="sourceLine" id="cb4-27" data-line-number="27">## Source:  /Users/kbenoit/GitHub/quanteda/docs/articles/* on x86_64 by kbenoit</div>
<div class="sourceLine" id="cb4-28" data-line-number="28">## Created: Fri Nov 17 09:11:04 2017</div>
<div class="sourceLine" id="cb4-29" data-line-number="29">## Notes:</div></code></pre>
<p>The last command, <code>metadoc</code>, allows you to define your own document meta-data fields. Note that in assiging just the single value of <code>"english"</code>, R has recycled the value until it matches the number of documents in the corpus. In creating a simple tag for our custom metadoc field <code>docsource</code>, we used the quanteda function <code><a href="../reference/ndoc.html">ndoc()</a></code> to retrieve the number of documents in our corpus. This function is deliberately designed to work in a way similar to functions you may already use in R, such as <code>nrow()</code> and <code>ncol()</code>.</p>
</section><section id="example-loading-in-files-using-the-readtext-package" class="level3"><h3>Example: loading in files using the <strong>readtext</strong> package</h3>
<pre class="sourceCode r" id="cb5"><code class="sourceCode r"><div class="sourceLine" id="cb5-1" data-line-number="1">
<span class="kw">require</span>(readtext)</div>
<div class="sourceLine" id="cb5-2" data-line-number="2"></div>
<div class="sourceLine" id="cb5-3" data-line-number="3"><span class="co"># Twitter json</span></div>
<div class="sourceLine" id="cb5-4" data-line-number="4">mytf1 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/social media/zombies/tweets.json"</span>)</div>
<div class="sourceLine" id="cb5-5" data-line-number="5">myCorpusTwitter &lt;-<span class="st"> </span><span class="kw"><a href="../reference/corpus.html">corpus</a></span>(mytf1)</div>
<div class="sourceLine" id="cb5-6" data-line-number="6">
<span class="kw">summary</span>(myCorpusTwitter, <span class="dv">5</span>)</div>
<div class="sourceLine" id="cb5-7" data-line-number="7"><span class="co"># generic json - needs a textfield specifier</span></div>
<div class="sourceLine" id="cb5-8" data-line-number="8">mytf2 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/Manuscripts/collocations/Corpora/sotu/sotu.json"</span>,</div>
<div class="sourceLine" id="cb5-9" data-line-number="9">                  <span class="dt">textfield =</span> <span class="st">"text"</span>)</div>
<div class="sourceLine" id="cb5-10" data-line-number="10">
<span class="kw">summary</span>(<span class="kw"><a href="../reference/corpus.html">corpus</a></span>(mytf2), <span class="dv">5</span>)</div>
<div class="sourceLine" id="cb5-11" data-line-number="11"><span class="co"># text file</span></div>
<div class="sourceLine" id="cb5-12" data-line-number="12">mytf3 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/corpora/project_gutenberg/pg2701.txt"</span>, <span class="dt">cache =</span> <span class="ot">FALSE</span>)</div>
<div class="sourceLine" id="cb5-13" data-line-number="13">
<span class="kw">summary</span>(<span class="kw"><a href="../reference/corpus.html">corpus</a></span>(mytf3), <span class="dv">5</span>)</div>
<div class="sourceLine" id="cb5-14" data-line-number="14"><span class="co"># multiple text files</span></div>
<div class="sourceLine" id="cb5-15" data-line-number="15">mytf4 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/corpora/inaugural/*.txt"</span>, <span class="dt">cache =</span> <span class="ot">FALSE</span>)</div>
<div class="sourceLine" id="cb5-16" data-line-number="16">
<span class="kw">summary</span>(<span class="kw"><a href="../reference/corpus.html">corpus</a></span>(mytf4), <span class="dv">5</span>)</div>
<div class="sourceLine" id="cb5-17" data-line-number="17"><span class="co"># multiple text files with docvars from filenames</span></div>
<div class="sourceLine" id="cb5-18" data-line-number="18">mytf5 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/corpora/inaugural/*.txt"</span>, </div>
<div class="sourceLine" id="cb5-19" data-line-number="19">                  <span class="dt">docvarsfrom =</span> <span class="st">"filenames"</span>, <span class="dt">sep =</span> <span class="st">"-"</span>, <span class="dt">docvarnames =</span> <span class="kw">c</span>(<span class="st">"Year"</span>, <span class="st">"President"</span>))</div>
<div class="sourceLine" id="cb5-20" data-line-number="20">
<span class="kw">summary</span>(<span class="kw"><a href="../reference/corpus.html">corpus</a></span>(mytf5), <span class="dv">5</span>)</div>
<div class="sourceLine" id="cb5-21" data-line-number="21"><span class="co"># XML data</span></div>
<div class="sourceLine" id="cb5-22" data-line-number="22">mytf6 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/quanteda_working_files/xmlData/plant_catalog.xml"</span>, </div>
<div class="sourceLine" id="cb5-23" data-line-number="23">                  <span class="dt">textfield =</span> <span class="st">"COMMON"</span>)</div>
<div class="sourceLine" id="cb5-24" data-line-number="24">
<span class="kw">summary</span>(<span class="kw"><a href="../reference/corpus.html">corpus</a></span>(mytf6), <span class="dv">5</span>)</div>
<div class="sourceLine" id="cb5-25" data-line-number="25"><span class="co"># csv file</span></div>
<div class="sourceLine" id="cb5-26" data-line-number="26">
<span class="kw">write.csv</span>(<span class="kw">data.frame</span>(<span class="dt">inaugSpeech =</span> <span class="kw"><a href="../reference/texts.html">texts</a></span>(data_corpus_inaugural), </div>
<div class="sourceLine" id="cb5-27" data-line-number="27">                     <span class="kw"><a href="../reference/docvars.html">docvars</a></span>(data_corpus_inaugural)),</div>
<div class="sourceLine" id="cb5-28" data-line-number="28">          <span class="dt">file =</span> <span class="st">"/tmp/inaug_texts.csv"</span>, <span class="dt">row.names =</span> <span class="ot">FALSE</span>)</div>
<div class="sourceLine" id="cb5-29" data-line-number="29">mytf7 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/readtext/topics/readtext">readtext</a></span>(<span class="st">"/tmp/inaug_texts.csv"</span>, <span class="dt">textfield =</span> <span class="st">"inaugSpeech"</span>)</div>
<div class="sourceLine" id="cb5-30" data-line-number="30">
<span class="kw">summary</span>(<span class="kw"><a href="../reference/corpus.html">corpus</a></span>(mytf7), <span class="dv">5</span>)</div></code></pre>
</section></section><section id="how-a-quanteda-corpus-works" class="level2"><h2>How a quanteda corpus works</h2>
<section id="corpus-principles" class="level3"><h3>Corpus principles</h3>
<p>A corpus is designed to be a “library” of original documents that have been converted to plain, UTF-8 encoded text, and stored along with meta-data at the corpus level and at the document-level. We have a special name for document-level meta-data: <em>docvars</em>. These are variables or features that describe attributes of each document.</p>
<p>A corpus is designed to be a more or less static container of texts with respect to processing and analysis. This means that the texts in corpus are not designed to be changed internally through (for example) cleaning or pre-processing steps, such as stemming or removing punctuation. Rather, texts can be extracted from the corpus as part of processing, and assigned to new objects, but the idea is that the corpus will remain as an original reference copy so that other analyses – for instance those in which stems and punctuation were required, such as analyzing a reading ease index – can be performed on the same corpus.</p>
<p>To extract texts from a a corpus, we use an extractor, called <code><a href="../reference/texts.html">texts()</a></code>.</p>
<pre class="sourceCode r" id="cb6"><code class="sourceCode r"><div class="sourceLine" id="cb6-1" data-line-number="1">
<span class="kw"><a href="../reference/texts.html">texts</a></span>(data_corpus_inaugural)[<span class="dv">2</span>]</div>
<div class="sourceLine" id="cb6-2" data-line-number="2">##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              1793-Washington </div>
<div class="sourceLine" id="cb6-3" data-line-number="3">## "Fellow citizens, I am again called upon by the voice of my country to execute the functions of its Chief Magistrate. When the occasion proper for it shall arrive, I shall endeavor to express the high sense I entertain of this distinguished honor, and of the confidence which has been reposed in me by the people of united America.\n\nPrevious to the execution of any official act of the President the Constitution requires an oath of office. This oath I am now about to take, and in your presence: That if it shall be found during my administration of the Government I have in any instance violated willingly or knowingly the injunctions thereof, I may (besides incurring constitutional punishment) be subject to the upbraidings of all who are now witnesses of the present solemn ceremony.\n\n "</div></code></pre>
<p>To summarize the texts from a corpus, we can call a <code>summary()</code> method defined for a corpus.</p>
<pre class="sourceCode r" id="cb7"><code class="sourceCode r"><div class="sourceLine" id="cb7-1" data-line-number="1">
<span class="kw">summary</span>(data_corpus_irishbudget2010)</div>
<div class="sourceLine" id="cb7-2" data-line-number="2">## Corpus consisting of 14 documents:</div>
<div class="sourceLine" id="cb7-3" data-line-number="3">## </div>
<div class="sourceLine" id="cb7-4" data-line-number="4">##                                   Text Types Tokens Sentences year debate</div>
<div class="sourceLine" id="cb7-5" data-line-number="5">##        2010_BUDGET_01_Brian_Lenihan_FF  1953   8641       374 2010 BUDGET</div>
<div class="sourceLine" id="cb7-6" data-line-number="6">##       2010_BUDGET_02_Richard_Bruton_FG  1040   4446       217 2010 BUDGET</div>
<div class="sourceLine" id="cb7-7" data-line-number="7">##         2010_BUDGET_03_Joan_Burton_LAB  1624   6393       307 2010 BUDGET</div>
<div class="sourceLine" id="cb7-8" data-line-number="8">##        2010_BUDGET_04_Arthur_Morgan_SF  1595   7107       343 2010 BUDGET</div>
<div class="sourceLine" id="cb7-9" data-line-number="9">##          2010_BUDGET_05_Brian_Cowen_FF  1629   6599       250 2010 BUDGET</div>
<div class="sourceLine" id="cb7-10" data-line-number="10">##           2010_BUDGET_06_Enda_Kenny_FG  1148   4232       153 2010 BUDGET</div>
<div class="sourceLine" id="cb7-11" data-line-number="11">##      2010_BUDGET_07_Kieran_ODonnell_FG   678   2297       133 2010 BUDGET</div>
<div class="sourceLine" id="cb7-12" data-line-number="12">##       2010_BUDGET_08_Eamon_Gilmore_LAB  1181   4177       201 2010 BUDGET</div>
<div class="sourceLine" id="cb7-13" data-line-number="13">##     2010_BUDGET_09_Michael_Higgins_LAB   488   1286        44 2010 BUDGET</div>
<div class="sourceLine" id="cb7-14" data-line-number="14">##        2010_BUDGET_10_Ruairi_Quinn_LAB   439   1284        59 2010 BUDGET</div>
<div class="sourceLine" id="cb7-15" data-line-number="15">##      2010_BUDGET_11_John_Gormley_Green   401   1030        49 2010 BUDGET</div>
<div class="sourceLine" id="cb7-16" data-line-number="16">##        2010_BUDGET_12_Eamon_Ryan_Green   510   1643        90 2010 BUDGET</div>
<div class="sourceLine" id="cb7-17" data-line-number="17">##      2010_BUDGET_13_Ciaran_Cuffe_Green   442   1240        45 2010 BUDGET</div>
<div class="sourceLine" id="cb7-18" data-line-number="18">##  2010_BUDGET_14_Caoimhghin_OCaolain_SF  1188   4044       176 2010 BUDGET</div>
<div class="sourceLine" id="cb7-19" data-line-number="19">##  number      foren     name party</div>
<div class="sourceLine" id="cb7-20" data-line-number="20">##      01      Brian  Lenihan    FF</div>
<div class="sourceLine" id="cb7-21" data-line-number="21">##      02    Richard   Bruton    FG</div>
<div class="sourceLine" id="cb7-22" data-line-number="22">##      03       Joan   Burton   LAB</div>
<div class="sourceLine" id="cb7-23" data-line-number="23">##      04     Arthur   Morgan    SF</div>
<div class="sourceLine" id="cb7-24" data-line-number="24">##      05      Brian    Cowen    FF</div>
<div class="sourceLine" id="cb7-25" data-line-number="25">##      06       Enda    Kenny    FG</div>
<div class="sourceLine" id="cb7-26" data-line-number="26">##      07     Kieran ODonnell    FG</div>
<div class="sourceLine" id="cb7-27" data-line-number="27">##      08      Eamon  Gilmore   LAB</div>
<div class="sourceLine" id="cb7-28" data-line-number="28">##      09    Michael  Higgins   LAB</div>
<div class="sourceLine" id="cb7-29" data-line-number="29">##      10     Ruairi    Quinn   LAB</div>
<div class="sourceLine" id="cb7-30" data-line-number="30">##      11       John  Gormley Green</div>
<div class="sourceLine" id="cb7-31" data-line-number="31">##      12      Eamon     Ryan Green</div>
<div class="sourceLine" id="cb7-32" data-line-number="32">##      13     Ciaran    Cuffe Green</div>
<div class="sourceLine" id="cb7-33" data-line-number="33">##      14 Caoimhghin OCaolain    SF</div>
<div class="sourceLine" id="cb7-34" data-line-number="34">## </div>
<div class="sourceLine" id="cb7-35" data-line-number="35">## Source:  /Users/kbenoit/Dropbox (Personal)/GitHub/quanteda/* on x86_64 by kbenoit</div>
<div class="sourceLine" id="cb7-36" data-line-number="36">## Created: Wed Jun 28 22:04:18 2017</div>
<div class="sourceLine" id="cb7-37" data-line-number="37">## Notes:</div></code></pre>
<p>We can save the output from the summary command as a data frame, and plot some basic descriptive statistics with this information:</p>
<pre class="sourceCode r" id="cb8"><code class="sourceCode r"><div class="sourceLine" id="cb8-1" data-line-number="1">tokenInfo &lt;-<span class="st"> </span><span class="kw">summary</span>(data_corpus_inaugural)</div>
<div class="sourceLine" id="cb8-2" data-line-number="2">
<span class="cf">if</span> (<span class="kw">require</span>(ggplot2))</div>
<div class="sourceLine" id="cb8-3" data-line-number="3">    <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="dt">data=</span>tokenInfo, <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x =</span> Year, <span class="dt">y =</span> Tokens, <span class="dt">group =</span> <span class="dv">1</span>)) <span class="op">+</span><span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_path">geom_line</a></span>() <span class="op">+</span><span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_point">geom_point</a></span>() <span class="op">+</span>
</div>
<div class="sourceLine" id="cb8-4" data-line-number="4">
<span class="st">        </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/scale_discrete">scale_x_discrete</a></span>(<span class="dt">labels =</span> <span class="kw">c</span>(<span class="kw">seq</span>(<span class="dv">1789</span>,<span class="dv">2012</span>,<span class="dv">12</span>)), <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">1789</span>,<span class="dv">2012</span>,<span class="dv">12</span>) ) </div>
<div class="sourceLine" id="cb8-5" data-line-number="5">## Loading required package: ggplot2</div></code></pre>
<p><img src="quickstart_files/figure-html/unnamed-chunk-9-1.png" width="768"></p>
<pre class="sourceCode r" id="cb9"><code class="sourceCode r"><div class="sourceLine" id="cb9-1" data-line-number="1"></div>
<div class="sourceLine" id="cb9-2" data-line-number="2"><span class="co"># Longest inaugural address: William Henry Harrison</span></div>
<div class="sourceLine" id="cb9-3" data-line-number="3">tokenInfo[<span class="kw">which.max</span>(tokenInfo<span class="op">$</span>Tokens), ] </div>
<div class="sourceLine" id="cb9-4" data-line-number="4">## Corpus consisting of 58 documents:</div>
<div class="sourceLine" id="cb9-5" data-line-number="5">## </div>
<div class="sourceLine" id="cb9-6" data-line-number="6">##           Text Types Tokens Sentences Year President     FirstName</div>
<div class="sourceLine" id="cb9-7" data-line-number="7">##  1841-Harrison  1896   9144       210 1841  Harrison William Henry</div>
<div class="sourceLine" id="cb9-8" data-line-number="8">## </div>
<div class="sourceLine" id="cb9-9" data-line-number="9">## Source:  Gerhard Peters and John T. Woolley. The American Presidency Project.</div>
<div class="sourceLine" id="cb9-10" data-line-number="10">## Created: Tue Jun 13 14:51:47 2017</div>
<div class="sourceLine" id="cb9-11" data-line-number="11">## Notes:   http://www.presidency.ucsb.edu/inaugurals.php</div></code></pre>
</section></section><section id="tools-for-handling-corpus-objects" class="level2"><h2>Tools for handling corpus objects</h2>
<section id="adding-two-corpus-objects-together" class="level3"><h3>Adding two corpus objects together</h3>
<p>The <code>+</code> operator provides a simple method for concatenating two corpus objects. If they contain different sets of document-level variables, these will be stitched together in a fashion that guarantees that no information is lost. Corpus-level medata data is also concatenated.</p>
<pre class="sourceCode r" id="cb10"><code class="sourceCode r"><div class="sourceLine" id="cb10-1" data-line-number="1">
<span class="kw">library</span>(quanteda)</div>
<div class="sourceLine" id="cb10-2" data-line-number="2">mycorpus1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/corpus.html">corpus</a></span>(data_corpus_inaugural[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>], <span class="dt">note =</span> <span class="st">"First five inaug speeches."</span>)</div>
<div class="sourceLine" id="cb10-3" data-line-number="3">## Warning in corpus.character(data_corpus_inaugural[1:5], note = "First five</div>
<div class="sourceLine" id="cb10-4" data-line-number="4">## inaug speeches."): Argument note not used.</div>
<div class="sourceLine" id="cb10-5" data-line-number="5">mycorpus2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/corpus.html">corpus</a></span>(data_corpus_inaugural[<span class="dv">53</span><span class="op">:</span><span class="dv">58</span>], <span class="dt">note =</span> <span class="st">"Last five inaug speeches."</span>)</div>
<div class="sourceLine" id="cb10-6" data-line-number="6">## Warning in corpus.character(data_corpus_inaugural[53:58], note = "Last five</div>
<div class="sourceLine" id="cb10-7" data-line-number="7">## inaug speeches."): Argument note not used.</div>
<div class="sourceLine" id="cb10-8" data-line-number="8">mycorpus3 &lt;-<span class="st"> </span>mycorpus1 <span class="op">+</span><span class="st"> </span>mycorpus2</div>
<div class="sourceLine" id="cb10-9" data-line-number="9">
<span class="kw">summary</span>(mycorpus3)</div>
<div class="sourceLine" id="cb10-10" data-line-number="10">## Corpus consisting of 11 documents:</div>
<div class="sourceLine" id="cb10-11" data-line-number="11">## </div>
<div class="sourceLine" id="cb10-12" data-line-number="12">##             Text Types Tokens Sentences</div>
<div class="sourceLine" id="cb10-13" data-line-number="13">##  1789-Washington   625   1538        23</div>
<div class="sourceLine" id="cb10-14" data-line-number="14">##  1793-Washington    96    147         4</div>
<div class="sourceLine" id="cb10-15" data-line-number="15">##       1797-Adams   826   2578        37</div>
<div class="sourceLine" id="cb10-16" data-line-number="16">##   1801-Jefferson   717   1927        41</div>
<div class="sourceLine" id="cb10-17" data-line-number="17">##   1805-Jefferson   804   2381        45</div>
<div class="sourceLine" id="cb10-18" data-line-number="18">##     1997-Clinton   773   2449       111</div>
<div class="sourceLine" id="cb10-19" data-line-number="19">##        2001-Bush   621   1808        97</div>
<div class="sourceLine" id="cb10-20" data-line-number="20">##        2005-Bush   773   2319       100</div>
<div class="sourceLine" id="cb10-21" data-line-number="21">##       2009-Obama   938   2711       110</div>
<div class="sourceLine" id="cb10-22" data-line-number="22">##       2013-Obama   814   2317        88</div>
<div class="sourceLine" id="cb10-23" data-line-number="23">##       2017-Trump   582   1660        88</div>
<div class="sourceLine" id="cb10-24" data-line-number="24">## </div>
<div class="sourceLine" id="cb10-25" data-line-number="25">## Source:  Combination of corpuses mycorpus1 and mycorpus2</div>
<div class="sourceLine" id="cb10-26" data-line-number="26">## Created: Fri Nov 17 09:11:06 2017</div>
<div class="sourceLine" id="cb10-27" data-line-number="27">## Notes:</div></code></pre>
</section><section id="subsetting-corpus-objects" class="level3"><h3>subsetting corpus objects</h3>
<p>There is a method of the <code><a href="../reference/corpus_subset.html">corpus_subset()</a></code> function defined for corpus objects, where a new corpus can be extracted based on logical conditions applied to docvars:</p>
<pre class="sourceCode r" id="cb11"><code class="sourceCode r"><div class="sourceLine" id="cb11-1" data-line-number="1">
<span class="kw">summary</span>(<span class="kw"><a href="../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, Year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1990</span>))</div>
<div class="sourceLine" id="cb11-2" data-line-number="2">## Corpus consisting of 7 documents:</div>
<div class="sourceLine" id="cb11-3" data-line-number="3">## </div>
<div class="sourceLine" id="cb11-4" data-line-number="4">##          Text Types Tokens Sentences Year President FirstName</div>
<div class="sourceLine" id="cb11-5" data-line-number="5">##  1993-Clinton   642   1833        81 1993   Clinton      Bill</div>
<div class="sourceLine" id="cb11-6" data-line-number="6">##  1997-Clinton   773   2449       111 1997   Clinton      Bill</div>
<div class="sourceLine" id="cb11-7" data-line-number="7">##     2001-Bush   621   1808        97 2001      Bush George W.</div>
<div class="sourceLine" id="cb11-8" data-line-number="8">##     2005-Bush   773   2319       100 2005      Bush George W.</div>
<div class="sourceLine" id="cb11-9" data-line-number="9">##    2009-Obama   938   2711       110 2009     Obama    Barack</div>
<div class="sourceLine" id="cb11-10" data-line-number="10">##    2013-Obama   814   2317        88 2013     Obama    Barack</div>
<div class="sourceLine" id="cb11-11" data-line-number="11">##    2017-Trump   582   1660        88 2017     Trump Donald J.</div>
<div class="sourceLine" id="cb11-12" data-line-number="12">## </div>
<div class="sourceLine" id="cb11-13" data-line-number="13">## Source:  Gerhard Peters and John T. Woolley. The American Presidency Project.</div>
<div class="sourceLine" id="cb11-14" data-line-number="14">## Created: Tue Jun 13 14:51:47 2017</div>
<div class="sourceLine" id="cb11-15" data-line-number="15">## Notes:   http://www.presidency.ucsb.edu/inaugurals.php</div>
<div class="sourceLine" id="cb11-16" data-line-number="16">
<span class="kw">summary</span>(<span class="kw"><a href="../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, President <span class="op">==</span><span class="st"> "Adams"</span>))</div>
<div class="sourceLine" id="cb11-17" data-line-number="17">## Corpus consisting of 2 documents:</div>
<div class="sourceLine" id="cb11-18" data-line-number="18">## </div>
<div class="sourceLine" id="cb11-19" data-line-number="19">##        Text Types Tokens Sentences Year President   FirstName</div>
<div class="sourceLine" id="cb11-20" data-line-number="20">##  1797-Adams   826   2578        37 1797     Adams        John</div>
<div class="sourceLine" id="cb11-21" data-line-number="21">##  1825-Adams  1003   3152        74 1825     Adams John Quincy</div>
<div class="sourceLine" id="cb11-22" data-line-number="22">## </div>
<div class="sourceLine" id="cb11-23" data-line-number="23">## Source:  Gerhard Peters and John T. Woolley. The American Presidency Project.</div>
<div class="sourceLine" id="cb11-24" data-line-number="24">## Created: Tue Jun 13 14:51:47 2017</div>
<div class="sourceLine" id="cb11-25" data-line-number="25">## Notes:   http://www.presidency.ucsb.edu/inaugurals.php</div></code></pre>
</section></section><section id="exploring-corpus-texts" class="level2"><h2>Exploring corpus texts</h2>
<p>The <code>kwic</code> function (keywords-in-context) performs a search for a word and allows us to view the contexts in which it occurs:</p>
<pre class="sourceCode r" id="cb12"><code class="sourceCode r"><div class="sourceLine" id="cb12-1" data-line-number="1">
<span class="kw">options</span>(<span class="dt">width =</span> <span class="dv">200</span>)</div>
<div class="sourceLine" id="cb12-2" data-line-number="2">
<span class="kw"><a href="../reference/kwic.html">kwic</a></span>(data_corpus_inaugural, <span class="st">"terror"</span>)</div>
<div class="sourceLine" id="cb12-3" data-line-number="3">##                                                                                                       </div>
<div class="sourceLine" id="cb12-4" data-line-number="4">##     [1797-Adams, 1325]              fraud or violence, by | terror | , intrigue, or venality          </div>
<div class="sourceLine" id="cb12-5" data-line-number="5">##  [1933-Roosevelt, 112] nameless, unreasoning, unjustified | terror | which paralyzes needed efforts to</div>
<div class="sourceLine" id="cb12-6" data-line-number="6">##  [1941-Roosevelt, 287]      seemed frozen by a fatalistic | terror | , we proved that this            </div>
<div class="sourceLine" id="cb12-7" data-line-number="7">##    [1961-Kennedy, 866]    alter that uncertain balance of | terror | that stays the hand of           </div>
<div class="sourceLine" id="cb12-8" data-line-number="8">##     [1981-Reagan, 813]     freeing all Americans from the | terror | of runaway living costs.         </div>
<div class="sourceLine" id="cb12-9" data-line-number="9">##   [1997-Clinton, 1055]        They fuel the fanaticism of | terror | . And they torment the           </div>
<div class="sourceLine" id="cb12-10" data-line-number="10">##   [1997-Clinton, 1655]  maintain a strong defense against | terror | and destruction. Our children    </div>
<div class="sourceLine" id="cb12-11" data-line-number="11">##     [2009-Obama, 1632]     advance their aims by inducing | terror | and slaughtering innocents, we</div>
<div class="sourceLine" id="cb12-12" data-line-number="12">
<span class="kw"><a href="../reference/kwic.html">kwic</a></span>(data_corpus_inaugural, <span class="st">"terror"</span>, <span class="dt">valuetype =</span> <span class="st">"regex"</span>)</div>
<div class="sourceLine" id="cb12-13" data-line-number="13">##                                                                                                               </div>
<div class="sourceLine" id="cb12-14" data-line-number="14">##     [1797-Adams, 1325]                   fraud or violence, by |  terror   | , intrigue, or venality          </div>
<div class="sourceLine" id="cb12-15" data-line-number="15">##  [1933-Roosevelt, 112]      nameless, unreasoning, unjustified |  terror   | which paralyzes needed efforts to</div>
<div class="sourceLine" id="cb12-16" data-line-number="16">##  [1941-Roosevelt, 287]           seemed frozen by a fatalistic |  terror   | , we proved that this            </div>
<div class="sourceLine" id="cb12-17" data-line-number="17">##    [1961-Kennedy, 866]         alter that uncertain balance of |  terror   | that stays the hand of           </div>
<div class="sourceLine" id="cb12-18" data-line-number="18">##    [1961-Kennedy, 990]               of science instead of its |  terrors  | . Together let us explore        </div>
<div class="sourceLine" id="cb12-19" data-line-number="19">##     [1981-Reagan, 813]          freeing all Americans from the |  terror   | of runaway living costs.         </div>
<div class="sourceLine" id="cb12-20" data-line-number="20">##    [1981-Reagan, 2196]        understood by those who practice | terrorism | and prey upon their neighbors    </div>
<div class="sourceLine" id="cb12-21" data-line-number="21">##   [1997-Clinton, 1055]             They fuel the fanaticism of |  terror   | . And they torment the           </div>
<div class="sourceLine" id="cb12-22" data-line-number="22">##   [1997-Clinton, 1655]       maintain a strong defense against |  terror   | and destruction. Our children    </div>
<div class="sourceLine" id="cb12-23" data-line-number="23">##     [2009-Obama, 1632]          advance their aims by inducing |  terror   | and slaughtering innocents, we   </div>
<div class="sourceLine" id="cb12-24" data-line-number="24">##     [2017-Trump, 1117] civilized world against radical Islamic | terrorism | , which we will eradicate</div>
<div class="sourceLine" id="cb12-25" data-line-number="25">
<span class="kw"><a href="../reference/kwic.html">kwic</a></span>(data_corpus_inaugural, <span class="st">"communist*"</span>)</div>
<div class="sourceLine" id="cb12-26" data-line-number="26">##                                                                                              </div>
<div class="sourceLine" id="cb12-27" data-line-number="27">##   [1949-Truman, 834] the actions resulting from the | Communist  | philosophy are a threat to</div>
<div class="sourceLine" id="cb12-28" data-line-number="28">##  [1961-Kennedy, 519]             -- not because the | Communists | may be doing it,</div></code></pre>
<p>In the above summary, <code>Year</code> and <code>President</code> are variables associated with each document. We can access such variables with the <code><a href="../reference/docvars.html">docvars()</a></code> function.</p>
<pre class="sourceCode r" id="cb13"><code class="sourceCode r"><div class="sourceLine" id="cb13-1" data-line-number="1"><span class="co"># inspect the document-level variables</span></div>
<div class="sourceLine" id="cb13-2" data-line-number="2">
<span class="kw">head</span>(<span class="kw"><a href="../reference/docvars.html">docvars</a></span>(data_corpus_inaugural))</div>
<div class="sourceLine" id="cb13-3" data-line-number="3">##                 Year  President FirstName</div>
<div class="sourceLine" id="cb13-4" data-line-number="4">## 1789-Washington 1789 Washington    George</div>
<div class="sourceLine" id="cb13-5" data-line-number="5">## 1793-Washington 1793 Washington    George</div>
<div class="sourceLine" id="cb13-6" data-line-number="6">## 1797-Adams      1797      Adams      John</div>
<div class="sourceLine" id="cb13-7" data-line-number="7">## 1801-Jefferson  1801  Jefferson    Thomas</div>
<div class="sourceLine" id="cb13-8" data-line-number="8">## 1805-Jefferson  1805  Jefferson    Thomas</div>
<div class="sourceLine" id="cb13-9" data-line-number="9">## 1809-Madison    1809    Madison     James</div>
<div class="sourceLine" id="cb13-10" data-line-number="10"></div>
<div class="sourceLine" id="cb13-11" data-line-number="11"><span class="co"># inspect the corpus-level metadata</span></div>
<div class="sourceLine" id="cb13-12" data-line-number="12">
<span class="kw"><a href="../reference/metacorpus.html">metacorpus</a></span>(data_corpus_inaugural)</div>
<div class="sourceLine" id="cb13-13" data-line-number="13">## $source</div>
<div class="sourceLine" id="cb13-14" data-line-number="14">## [1] "Gerhard Peters and John T. Woolley. The American Presidency Project."</div>
<div class="sourceLine" id="cb13-15" data-line-number="15">## </div>
<div class="sourceLine" id="cb13-16" data-line-number="16">## $notes</div>
<div class="sourceLine" id="cb13-17" data-line-number="17">## [1] "http://www.presidency.ucsb.edu/inaugurals.php"</div>
<div class="sourceLine" id="cb13-18" data-line-number="18">## </div>
<div class="sourceLine" id="cb13-19" data-line-number="19">## $created</div>
<div class="sourceLine" id="cb13-20" data-line-number="20">## [1] "Tue Jun 13 14:51:47 2017"</div></code></pre>
<p>More corpora are available from the <a href="http://github.com/kbenoit/quantedaData">quantedaData</a> package.</p>
</section></section><section id="extracting-features-from-a-corpus" class="level1"><h1>Extracting Features from a Corpus</h1>
<p>In order to perform statistical analysis such as document scaling, we must extract a matrix associating values for certain features with each document. In quanteda, we use the <code>dfm</code> function to produce such a matrix. “dfm” is short for <em>document-feature matrix</em>, and always refers to documents in rows and “features” as columns. We fix this dimensional orientation because is is standard in data analysis to have a unit of analysis as a row, and features or variables pertaining to each unit as columns. We call them “features” rather than terms, because features are more general than terms: they can be defined as raw terms, stemmed terms, the parts of speech of terms, terms after stopwords have been removed, or a dictionary class to which a term belongs. Features can be entirely general, such as ngrams or syntactic dependencies, and we leave this open-ended.</p>
<section id="tokenizing-texts" class="level2"><h2>Tokenizing texts</h2>
<p>To simply tokenize a text, quanteda provides a powerful command called <code><a href="../reference/tokens.html">tokens()</a></code>. This produces an intermediate object, consisting of a list of tokens in the form of character vectors, where each element of the list corresponds to an input document.</p>
<p><code><a href="../reference/tokens.html">tokens()</a></code> is deliberately conservative, meaning that it does not remove anything from the text unless told to do so.</p>
<pre class="sourceCode r" id="cb14"><code class="sourceCode r"><div class="sourceLine" id="cb14-1" data-line-number="1">txt &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">text1 =</span> <span class="st">"This is $10 in 999 different ways,</span><span class="ch">\n</span><span class="st"> up and down; left and right!"</span>, </div>
<div class="sourceLine" id="cb14-2" data-line-number="2">         <span class="dt">text2 =</span> <span class="st">"@kenbenoit working: on #quanteda 2day</span><span class="ch">\t</span><span class="st">4ever, http://textasdata.com?page=123."</span>)</div>
<div class="sourceLine" id="cb14-3" data-line-number="3">
<span class="kw"><a href="../reference/tokens.html">tokens</a></span>(txt)</div>
<div class="sourceLine" id="cb14-4" data-line-number="4">## tokens from 2 documents.</div>
<div class="sourceLine" id="cb14-5" data-line-number="5">## text1 :</div>
<div class="sourceLine" id="cb14-6" data-line-number="6">##  [1] "This"      "is"        "$"         "10"        "in"        "999"       "different" "ways"      ","         "up"        "and"       "down"      ";"         "left"      "and"       "right"    </div>
<div class="sourceLine" id="cb14-7" data-line-number="7">## [17] "!"        </div>
<div class="sourceLine" id="cb14-8" data-line-number="8">## </div>
<div class="sourceLine" id="cb14-9" data-line-number="9">## text2 :</div>
<div class="sourceLine" id="cb14-10" data-line-number="10">##  [1] "@kenbenoit"     "working"        ":"              "on"             "#quanteda"      "2day"           "4ever"          ","              "http"           ":"              "/"             </div>
<div class="sourceLine" id="cb14-11" data-line-number="11">## [12] "/"              "textasdata.com" "?"              "page"           "="              "123"            "."</div>
<div class="sourceLine" id="cb14-12" data-line-number="12">
<span class="kw"><a href="../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">TRUE</span>,  <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</div>
<div class="sourceLine" id="cb14-13" data-line-number="13">## tokens from 2 documents.</div>
<div class="sourceLine" id="cb14-14" data-line-number="14">## text1 :</div>
<div class="sourceLine" id="cb14-15" data-line-number="15">##  [1] "This"      "is"        "in"        "different" "ways"      "up"        "and"       "down"      "left"      "and"       "right"    </div>
<div class="sourceLine" id="cb14-16" data-line-number="16">## </div>
<div class="sourceLine" id="cb14-17" data-line-number="17">## text2 :</div>
<div class="sourceLine" id="cb14-18" data-line-number="18">## [1] "@kenbenoit"     "working"        "on"             "#quanteda"      "2day"           "4ever"          "http"           "textasdata.com" "page"</div>
<div class="sourceLine" id="cb14-19" data-line-number="19">
<span class="kw"><a href="../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">FALSE</span>, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</div>
<div class="sourceLine" id="cb14-20" data-line-number="20">## tokens from 2 documents.</div>
<div class="sourceLine" id="cb14-21" data-line-number="21">## text1 :</div>
<div class="sourceLine" id="cb14-22" data-line-number="22">##  [1] "This"      "is"        "10"        "in"        "999"       "different" "ways"      "up"        "and"       "down"      "left"      "and"       "right"    </div>
<div class="sourceLine" id="cb14-23" data-line-number="23">## </div>
<div class="sourceLine" id="cb14-24" data-line-number="24">## text2 :</div>
<div class="sourceLine" id="cb14-25" data-line-number="25">##  [1] "@kenbenoit"     "working"        "on"             "#quanteda"      "2day"           "4ever"          "http"           "textasdata.com" "page"           "123"</div>
<div class="sourceLine" id="cb14-26" data-line-number="26">
<span class="kw"><a href="../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">TRUE</span>,  <span class="dt">remove_punct =</span> <span class="ot">FALSE</span>)</div>
<div class="sourceLine" id="cb14-27" data-line-number="27">## tokens from 2 documents.</div>
<div class="sourceLine" id="cb14-28" data-line-number="28">## text1 :</div>
<div class="sourceLine" id="cb14-29" data-line-number="29">##  [1] "This"      "is"        "$"         "in"        "different" "ways"      ","         "up"        "and"       "down"      ";"         "left"      "and"       "right"     "!"        </div>
<div class="sourceLine" id="cb14-30" data-line-number="30">## </div>
<div class="sourceLine" id="cb14-31" data-line-number="31">## text2 :</div>
<div class="sourceLine" id="cb14-32" data-line-number="32">##  [1] "@kenbenoit"     "working"        ":"              "on"             "#quanteda"      "2day"           "4ever"          ","              "http"           ":"              "/"             </div>
<div class="sourceLine" id="cb14-33" data-line-number="33">## [12] "/"              "textasdata.com" "?"              "page"           "="              "."</div>
<div class="sourceLine" id="cb14-34" data-line-number="34">
<span class="kw"><a href="../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">FALSE</span>, <span class="dt">remove_punct =</span> <span class="ot">FALSE</span>)</div>
<div class="sourceLine" id="cb14-35" data-line-number="35">## tokens from 2 documents.</div>
<div class="sourceLine" id="cb14-36" data-line-number="36">## text1 :</div>
<div class="sourceLine" id="cb14-37" data-line-number="37">##  [1] "This"      "is"        "$"         "10"        "in"        "999"       "different" "ways"      ","         "up"        "and"       "down"      ";"         "left"      "and"       "right"    </div>
<div class="sourceLine" id="cb14-38" data-line-number="38">## [17] "!"        </div>
<div class="sourceLine" id="cb14-39" data-line-number="39">## </div>
<div class="sourceLine" id="cb14-40" data-line-number="40">## text2 :</div>
<div class="sourceLine" id="cb14-41" data-line-number="41">##  [1] "@kenbenoit"     "working"        ":"              "on"             "#quanteda"      "2day"           "4ever"          ","              "http"           ":"              "/"             </div>
<div class="sourceLine" id="cb14-42" data-line-number="42">## [12] "/"              "textasdata.com" "?"              "page"           "="              "123"            "."</div>
<div class="sourceLine" id="cb14-43" data-line-number="43">
<span class="kw"><a href="../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">FALSE</span>, <span class="dt">remove_punct =</span> <span class="ot">FALSE</span>, <span class="dt">remove_separators =</span> <span class="ot">FALSE</span>)</div>
<div class="sourceLine" id="cb14-44" data-line-number="44">## tokens from 2 documents.</div>
<div class="sourceLine" id="cb14-45" data-line-number="45">## text1 :</div>
<div class="sourceLine" id="cb14-46" data-line-number="46">##  [1] "This"      " "         "is"        " "         "$"         "10"        " "         "in"        " "         "999"       " "         "different" " "         "ways"      ","         "\n"       </div>
<div class="sourceLine" id="cb14-47" data-line-number="47">## [17] " "         "up"        " "         "and"       " "         "down"      ";"         " "         "left"      " "         "and"       " "         "right"     "!"        </div>
<div class="sourceLine" id="cb14-48" data-line-number="48">## </div>
<div class="sourceLine" id="cb14-49" data-line-number="49">## text2 :</div>
<div class="sourceLine" id="cb14-50" data-line-number="50">##  [1] "@kenbenoit"     " "              "working"        ":"              " "              "on"             " "              "#quanteda"      " "              "2day"           "\t"            </div>
<div class="sourceLine" id="cb14-51" data-line-number="51">## [12] "4ever"          ","              " "              "http"           ":"              "/"              "/"              "textasdata.com" "?"              "page"           "="             </div>
<div class="sourceLine" id="cb14-52" data-line-number="52">## [23] "123"            "."</div></code></pre>
<p>We also have the option to tokenize characters:</p>
<pre class="sourceCode r" id="cb15"><code class="sourceCode r"><div class="sourceLine" id="cb15-1" data-line-number="1">
<span class="kw"><a href="../reference/tokens.html">tokens</a></span>(<span class="st">"Great website: http://textasdata.com?page=123."</span>, <span class="dt">what =</span> <span class="st">"character"</span>)</div>
<div class="sourceLine" id="cb15-2" data-line-number="2">## tokens from 1 document.</div>
<div class="sourceLine" id="cb15-3" data-line-number="3">## text1 :</div>
<div class="sourceLine" id="cb15-4" data-line-number="4">##  [1] "G" "r" "e" "a" "t" "w" "e" "b" "s" "i" "t" "e" ":" "h" "t" "t" "p" ":" "/" "/" "t" "e" "x" "t" "a" "s" "d" "a" "t" "a" "." "c" "o" "m" "?" "p" "a" "g" "e" "=" "1" "2" "3" "."</div>
<div class="sourceLine" id="cb15-5" data-line-number="5">
<span class="kw"><a href="../reference/tokens.html">tokens</a></span>(<span class="st">"Great website: http://textasdata.com?page=123."</span>, <span class="dt">what =</span> <span class="st">"character"</span>, </div>
<div class="sourceLine" id="cb15-6" data-line-number="6">         <span class="dt">remove_separators =</span> <span class="ot">FALSE</span>)</div>
<div class="sourceLine" id="cb15-7" data-line-number="7">## tokens from 1 document.</div>
<div class="sourceLine" id="cb15-8" data-line-number="8">## text1 :</div>
<div class="sourceLine" id="cb15-9" data-line-number="9">##  [1] "G" "r" "e" "a" "t" " " "w" "e" "b" "s" "i" "t" "e" ":" " " "h" "t" "t" "p" ":" "/" "/" "t" "e" "x" "t" "a" "s" "d" "a" "t" "a" "." "c" "o" "m" "?" "p" "a" "g" "e" "=" "1" "2" "3" "."</div></code></pre>
<p>and sentences:</p>
<pre class="sourceCode r" id="cb16"><code class="sourceCode r"><div class="sourceLine" id="cb16-1" data-line-number="1"><span class="co"># sentence level         </span></div>
<div class="sourceLine" id="cb16-2" data-line-number="2">
<span class="kw"><a href="../reference/tokens.html">tokens</a></span>(<span class="kw">c</span>(<span class="st">"Kurt Vongeut said; only assholes use semi-colons."</span>, </div>
<div class="sourceLine" id="cb16-3" data-line-number="3">           <span class="st">"Today is Thursday in Canberra:  It is yesterday in London."</span>, </div>
<div class="sourceLine" id="cb16-4" data-line-number="4">           <span class="st">"En el caso de que no puedas ir con ellos, ¿quieres ir con nosotros?"</span>), </div>
<div class="sourceLine" id="cb16-5" data-line-number="5">          <span class="dt">what =</span> <span class="st">"sentence"</span>)</div>
<div class="sourceLine" id="cb16-6" data-line-number="6">## tokens from 3 documents.</div>
<div class="sourceLine" id="cb16-7" data-line-number="7">## text1 :</div>
<div class="sourceLine" id="cb16-8" data-line-number="8">## [1] "Kurt Vongeut said; only assholes use semi-colons."</div>
<div class="sourceLine" id="cb16-9" data-line-number="9">## </div>
<div class="sourceLine" id="cb16-10" data-line-number="10">## text2 :</div>
<div class="sourceLine" id="cb16-11" data-line-number="11">## [1] "Today is Thursday in Canberra:  It is yesterday in London."</div>
<div class="sourceLine" id="cb16-12" data-line-number="12">## </div>
<div class="sourceLine" id="cb16-13" data-line-number="13">## text3 :</div>
<div class="sourceLine" id="cb16-14" data-line-number="14">## [1] "En el caso de que no puedas ir con ellos, ¿quieres ir con nosotros?"</div></code></pre>
</section><section id="constructing-a-document-frequency-matrix" class="level2"><h2>Constructing a document-frequency matrix</h2>
<p>Tokenizing texts is an intermediate option, and most users will want to skip straight to constructing a document-feature matrix. For this, we have a Swiss-army knife function, called <code><a href="../reference/dfm.html">dfm()</a></code>, which performs tokenization and tabulates the extracted features into a matrix of documents by features. Unlike the conservative approach taken by <code><a href="../reference/tokens.html">tokens()</a></code>, the <code><a href="../reference/dfm.html">dfm()</a></code> function applies certain options by default, such as <code>toLower()</code> – a separate function for lower-casing texts – and removes punctuation. All of the options to <code><a href="../reference/tokens.html">tokens()</a></code> can be passed to <code><a href="../reference/dfm.html">dfm()</a></code>, however.</p>
<pre class="sourceCode r" id="cb17"><code class="sourceCode r"><div class="sourceLine" id="cb17-1" data-line-number="1">myCorpus &lt;-<span class="st"> </span><span class="kw"><a href="../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, Year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1990</span>)</div>
<div class="sourceLine" id="cb17-2" data-line-number="2"></div>
<div class="sourceLine" id="cb17-3" data-line-number="3"><span class="co"># make a dfm</span></div>
<div class="sourceLine" id="cb17-4" data-line-number="4">myDfm &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dfm.html">dfm</a></span>(myCorpus)</div>
<div class="sourceLine" id="cb17-5" data-line-number="5">myDfm[, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</div>
<div class="sourceLine" id="cb17-6" data-line-number="6">## Document-feature matrix of: 7 documents, 5 features (0% sparse).</div>
<div class="sourceLine" id="cb17-7" data-line-number="7">## 7 x 5 sparse Matrix of class "dfm"</div>
<div class="sourceLine" id="cb17-8" data-line-number="8">##               features</div>
<div class="sourceLine" id="cb17-9" data-line-number="9">## docs           my fellow citizens   , today</div>
<div class="sourceLine" id="cb17-10" data-line-number="10">##   1993-Clinton  7      5        2 139    10</div>
<div class="sourceLine" id="cb17-11" data-line-number="11">##   1997-Clinton  6      7        7 131     5</div>
<div class="sourceLine" id="cb17-12" data-line-number="12">##   2001-Bush     3      1        9 110     2</div>
<div class="sourceLine" id="cb17-13" data-line-number="13">##   2005-Bush     2      3        6 120     3</div>
<div class="sourceLine" id="cb17-14" data-line-number="14">##   2009-Obama    2      1        1 130     6</div>
<div class="sourceLine" id="cb17-15" data-line-number="15">##   2013-Obama    3      3        6  99     4</div>
<div class="sourceLine" id="cb17-16" data-line-number="16">##   2017-Trump    1      1        4  96     4</div></code></pre>
<p>Other options for a <code><a href="../reference/dfm.html">dfm()</a></code> include removing stopwords, and stemming the tokens.</p>
<pre class="sourceCode r" id="cb18"><code class="sourceCode r"><div class="sourceLine" id="cb18-1" data-line-number="1"><span class="co"># make a dfm, removing stopwords and applying stemming</span></div>
<div class="sourceLine" id="cb18-2" data-line-number="2">myStemMat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dfm.html">dfm</a></span>(myCorpus, <span class="dt">remove =</span> <span class="kw"><a href="../reference/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>), <span class="dt">stem =</span> <span class="ot">TRUE</span>, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</div>
<div class="sourceLine" id="cb18-3" data-line-number="3">myStemMat[, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</div>
<div class="sourceLine" id="cb18-4" data-line-number="4">## Document-feature matrix of: 7 documents, 5 features (17.1% sparse).</div>
<div class="sourceLine" id="cb18-5" data-line-number="5">## 7 x 5 sparse Matrix of class "dfm"</div>
<div class="sourceLine" id="cb18-6" data-line-number="6">##               features</div>
<div class="sourceLine" id="cb18-7" data-line-number="7">## docs           fellow citizen today celebr mysteri</div>
<div class="sourceLine" id="cb18-8" data-line-number="8">##   1993-Clinton      5       2    10      4       1</div>
<div class="sourceLine" id="cb18-9" data-line-number="9">##   1997-Clinton      7       8     6      1       0</div>
<div class="sourceLine" id="cb18-10" data-line-number="10">##   2001-Bush         1      10     2      0       0</div>
<div class="sourceLine" id="cb18-11" data-line-number="11">##   2005-Bush         3       7     3      2       0</div>
<div class="sourceLine" id="cb18-12" data-line-number="12">##   2009-Obama        1       1     6      2       0</div>
<div class="sourceLine" id="cb18-13" data-line-number="13">##   2013-Obama        3       8     6      1       0</div>
<div class="sourceLine" id="cb18-14" data-line-number="14">##   2017-Trump        1       4     5      3       1</div></code></pre>
<p>The option <code>remove</code> provides a list of tokens to be ignored. Most users will supply a list of pre-defined “stop words”, defined for numerous languages, accessed through the <code><a href="../reference/stopwords.html">stopwords()</a></code> function:</p>
<pre class="sourceCode r" id="cb19"><code class="sourceCode r"><div class="sourceLine" id="cb19-1" data-line-number="1">
<span class="kw">head</span>(<span class="kw"><a href="../reference/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>), <span class="dv">20</span>)</div>
<div class="sourceLine" id="cb19-2" data-line-number="2">##  [1] "i"          "me"         "my"         "myself"     "we"         "our"        "ours"       "ourselves"  "you"        "your"       "yours"      "yourself"   "yourselves" "he"         "him"       </div>
<div class="sourceLine" id="cb19-3" data-line-number="3">## [16] "his"        "himself"    "she"        "her"        "hers"</div>
<div class="sourceLine" id="cb19-4" data-line-number="4">
<span class="kw">head</span>(<span class="kw"><a href="../reference/stopwords.html">stopwords</a></span>(<span class="st">"russian"</span>), <span class="dv">10</span>)</div>
<div class="sourceLine" id="cb19-5" data-line-number="5">##  [1] "и"   "в"   "во"  "не"  "что" "он"  "на"  "я"   "с"   "со"</div>
<div class="sourceLine" id="cb19-6" data-line-number="6">
<span class="kw">head</span>(<span class="kw"><a href="../reference/stopwords.html">stopwords</a></span>(<span class="st">"arabic"</span>), <span class="dv">10</span>)</div>
<div class="sourceLine" id="cb19-7" data-line-number="7">##  [1] "فى"  "في"  "كل"  "لم"  "لن"  "له"  "من"  "هو"  "هي"  "قوة"</div></code></pre>
<section id="viewing-the-document-frequency-matrix" class="level3"><h3>Viewing the document-frequency matrix</h3>
<p>The dfm can be inspected in the Enviroment pane in RStudio, or by calling R’s <code>View</code> function. Calling <code>plot</code> on a dfm will display a wordcloud using the <a href="link.">wordcloud package</a></p>
<pre class="sourceCode r" id="cb20"><code class="sourceCode r"><div class="sourceLine" id="cb20-1" data-line-number="1">mydfm &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dfm.html">dfm</a></span>(data_char_ukimmig2010, <span class="dt">remove =</span> <span class="kw"><a href="../reference/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>), <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</div>
<div class="sourceLine" id="cb20-2" data-line-number="2">mydfm</div>
<div class="sourceLine" id="cb20-3" data-line-number="3">## Document-feature matrix of: 9 documents, 1,547 features (83.8% sparse).</div></code></pre>
<p>To access a list of the most frequently occurring features, we can use <code><a href="../reference/topfeatures.html">topfeatures()</a></code>:</p>
<pre class="sourceCode r" id="cb21"><code class="sourceCode r"><div class="sourceLine" id="cb21-1" data-line-number="1">
<span class="kw"><a href="../reference/topfeatures.html">topfeatures</a></span>(mydfm, <span class="dv">20</span>)  <span class="co"># 20 top words</span>
</div>
<div class="sourceLine" id="cb21-2" data-line-number="2">## immigration     british      people      asylum     britain          uk      system  population     country         new  immigrants      ensure       shall citizenship      social    national </div>
<div class="sourceLine" id="cb21-3" data-line-number="3">##          66          37          35          29          28          27          27          21          20          19          17          17          17          16          14          14 </div>
<div class="sourceLine" id="cb21-4" data-line-number="4">##         bnp     illegal        work     percent </div>
<div class="sourceLine" id="cb21-5" data-line-number="5">##          13          13          13          12</div></code></pre>
<p>Plotting a word cloud is done using <code><a href="../reference/textplot_wordcloud.html">textplot_wordcloud()</a></code>, for a <code>dfm</code> class object. This function passes arguments through to <code>wordcloud()</code> from the <strong>wordcloud</strong> package, and can prettify the plot using the same arguments:</p>
<pre class="sourceCode r" id="cb22"><code class="sourceCode r"><div class="sourceLine" id="cb22-1" data-line-number="1">
<span class="kw">set.seed</span>(<span class="dv">100</span>)</div>
<div class="sourceLine" id="cb22-2" data-line-number="2">
<span class="kw"><a href="../reference/textplot_wordcloud.html">textplot_wordcloud</a></span>(mydfm, <span class="dt">min.freq =</span> <span class="dv">6</span>, <span class="dt">random.order =</span> <span class="ot">FALSE</span>,</div>
<div class="sourceLine" id="cb22-3" data-line-number="3">                   <span class="dt">rot.per =</span> <span class="fl">.25</span>, </div>
<div class="sourceLine" id="cb22-4" data-line-number="4">                   <span class="dt">colors =</span> RColorBrewer<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/RColorBrewer/topics/ColorBrewer">brewer.pal</a></span>(<span class="dv">8</span>,<span class="st">"Dark2"</span>))</div></code></pre>
<p><img src="quickstart_files/figure-html/unnamed-chunk-22-1.png" width="672"></p>
</section><section id="grouping-documents-by-document-variable" class="level3"><h3>Grouping documents by document variable</h3>
<p>Often, we are interested in analysing how texts differ according to substantive factors which may be encoded in the document variables, rather than simply by the boundaries of the document files. We can group documents which share the same value for a document variable when creating a dfm:</p>
<pre class="sourceCode r" id="cb23"><code class="sourceCode r"><div class="sourceLine" id="cb23-1" data-line-number="1">byPartyDfm &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dfm.html">dfm</a></span>(data_corpus_irishbudget2010, <span class="dt">groups =</span> <span class="st">"party"</span>, <span class="dt">remove =</span> <span class="kw"><a href="../reference/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>), <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</div></code></pre>
<p>We can sort this dfm, and inspect it:</p>
<pre class="sourceCode r" id="cb24"><code class="sourceCode r"><div class="sourceLine" id="cb24-1" data-line-number="1">
<span class="kw"><a href="../reference/dfm_sort.html">dfm_sort</a></span>(byPartyDfm)[, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]</div>
<div class="sourceLine" id="cb24-2" data-line-number="2">## Document-feature matrix of: 5 documents, 10 features (0% sparse).</div>
<div class="sourceLine" id="cb24-3" data-line-number="3">## 5 x 10 sparse Matrix of class "dfm"</div>
<div class="sourceLine" id="cb24-4" data-line-number="4">##        features</div>
<div class="sourceLine" id="cb24-5" data-line-number="5">## docs    people budget government public minister tax economy pay jobs billion</div>
<div class="sourceLine" id="cb24-6" data-line-number="6">##   FF        23     44         47     65       11  60      37  41   41      32</div>
<div class="sourceLine" id="cb24-7" data-line-number="7">##   FG        78     71         61     47       62  11      20  29   17      21</div>
<div class="sourceLine" id="cb24-8" data-line-number="8">##   LAB       69     66         36     32       54  47      37  24   20      34</div>
<div class="sourceLine" id="cb24-9" data-line-number="9">##   SF        81     53         73     31       39  34      50  24   27      29</div>
<div class="sourceLine" id="cb24-10" data-line-number="10">##   Green     15     26         19      4        4  11      16   4   15       3</div></code></pre>
<p>Note that the most frequently occurring feature is “will”, a word usually on English stop lists, but one that is not included in quanteda’s built-in English stopword list.</p>
</section><section id="grouping-words-by-dictionary-or-equivalence-class" class="level3"><h3>Grouping words by dictionary or equivalence class</h3>
<p>For some applications we have prior knowledge of sets of words that are indicative of traits we would like to measure from the text. For example, a general list of positive words might indicate positive sentiment in a movie review, or we might have a dictionary of political terms which are associated with a particular ideological stance. In these cases, it is sometimes useful to treat these groups of words as equivalent for the purposes of analysis, and sum their counts into classes.</p>
<p>For example, let’s look at how words associated with terrorism and words associated with the economy vary by President in the inaugural speeches corpus. From the original corpus, we select Presidents since Clinton:</p>
<pre class="sourceCode r" id="cb25"><code class="sourceCode r"><div class="sourceLine" id="cb25-1" data-line-number="1">recentCorpus &lt;-<span class="st"> </span><span class="kw"><a href="../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, Year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1991</span>)</div></code></pre>
<p>Now we define a demonstration dictionary:</p>
<pre class="sourceCode r" id="cb26"><code class="sourceCode r"><div class="sourceLine" id="cb26-1" data-line-number="1">myDict &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dictionary.html">dictionary</a></span>(<span class="kw">list</span>(<span class="dt">terror =</span> <span class="kw">c</span>(<span class="st">"terrorism"</span>, <span class="st">"terrorists"</span>, <span class="st">"threat"</span>),</div>
<div class="sourceLine" id="cb26-2" data-line-number="2">                          <span class="dt">economy =</span> <span class="kw">c</span>(<span class="st">"jobs"</span>, <span class="st">"business"</span>, <span class="st">"grow"</span>, <span class="st">"work"</span>)))</div></code></pre>
<p>We can use the dictionary when making the dfm:</p>
<pre class="sourceCode r" id="cb27"><code class="sourceCode r"><div class="sourceLine" id="cb27-1" data-line-number="1">byPresMat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dfm.html">dfm</a></span>(recentCorpus, <span class="dt">dictionary =</span> myDict)</div>
<div class="sourceLine" id="cb27-2" data-line-number="2">byPresMat</div>
<div class="sourceLine" id="cb27-3" data-line-number="3">## Document-feature matrix of: 7 documents, 2 features (14.3% sparse).</div>
<div class="sourceLine" id="cb27-4" data-line-number="4">## 7 x 2 sparse Matrix of class "dfm"</div>
<div class="sourceLine" id="cb27-5" data-line-number="5">##               features</div>
<div class="sourceLine" id="cb27-6" data-line-number="6">## docs           terror economy</div>
<div class="sourceLine" id="cb27-7" data-line-number="7">##   1993-Clinton      0       8</div>
<div class="sourceLine" id="cb27-8" data-line-number="8">##   1997-Clinton      1       8</div>
<div class="sourceLine" id="cb27-9" data-line-number="9">##   2001-Bush         0       4</div>
<div class="sourceLine" id="cb27-10" data-line-number="10">##   2005-Bush         1       6</div>
<div class="sourceLine" id="cb27-11" data-line-number="11">##   2009-Obama        1      10</div>
<div class="sourceLine" id="cb27-12" data-line-number="12">##   2013-Obama        1       6</div>
<div class="sourceLine" id="cb27-13" data-line-number="13">##   2017-Trump        1       5</div></code></pre>
<p>The constructor function <code><a href="../reference/dictionary.html">dictionary()</a></code> also works with two common “foreign” dictionary formats: the LIWC and Provalis Research’s Wordstat format. For instance, we can load the LIWC and apply this to the Presidential inaugural speech corpus:</p>
<pre class="sourceCode r" id="cb28"><code class="sourceCode r"><div class="sourceLine" id="cb28-1" data-line-number="1">liwcdict &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dictionary.html">dictionary</a></span>(<span class="dt">file =</span> <span class="st">"~/Dropbox/QUANTESS/dictionaries/LIWC/LIWC2001_English.dic"</span>,</div>
<div class="sourceLine" id="cb28-2" data-line-number="2">                       <span class="dt">format =</span> <span class="st">"LIWC"</span>)</div>
<div class="sourceLine" id="cb28-3" data-line-number="3">liwcdfm &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dfm.html">dfm</a></span>(data_corpus_inaugural[<span class="dv">52</span><span class="op">:</span><span class="dv">58</span>], <span class="dt">dictionary =</span> liwcdict, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</div>
<div class="sourceLine" id="cb28-4" data-line-number="4">liwcdfm[, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]</div></code></pre>
</section></section></section><section id="further-examples" class="level1"><h1>Further Examples</h1>
<section id="similarities-between-texts" class="level2"><h2>Similarities between texts</h2>
<pre class="sourceCode r" id="cb29"><code class="sourceCode r"><div class="sourceLine" id="cb29-1" data-line-number="1">presDfm &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dfm.html">dfm</a></span>(<span class="kw"><a href="../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, Year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1980</span>), </div>
<div class="sourceLine" id="cb29-2" data-line-number="2">               <span class="dt">remove =</span> <span class="kw"><a href="../reference/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>), <span class="dt">stem =</span> <span class="ot">TRUE</span>, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</div>
<div class="sourceLine" id="cb29-3" data-line-number="3">obamaSimil &lt;-<span class="st"> </span><span class="kw"><a href="../reference/textstat_simil.html">textstat_simil</a></span>(presDfm, <span class="kw">c</span>(<span class="st">"2009-Obama"</span> , <span class="st">"2013-Obama"</span>), </div>
<div class="sourceLine" id="cb29-4" data-line-number="4">                             <span class="dt">margin =</span> <span class="st">"documents"</span>, <span class="dt">method =</span> <span class="st">"cosine"</span>)</div>
<div class="sourceLine" id="cb29-5" data-line-number="5">obamaSimil</div>
<div class="sourceLine" id="cb29-6" data-line-number="6">##              2009-Obama 2013-Obama</div>
<div class="sourceLine" id="cb29-7" data-line-number="7">## 2009-Obama    1.0000000  0.6815711</div>
<div class="sourceLine" id="cb29-8" data-line-number="8">## 2013-Obama    0.6815711  1.0000000</div>
<div class="sourceLine" id="cb29-9" data-line-number="9">## 1981-Reagan   0.6229949  0.6376412</div>
<div class="sourceLine" id="cb29-10" data-line-number="10">## 1985-Reagan   0.6434472  0.6629428</div>
<div class="sourceLine" id="cb29-11" data-line-number="11">## 1989-Bush     0.6253944  0.5784290</div>
<div class="sourceLine" id="cb29-12" data-line-number="12">## 1993-Clinton  0.6280946  0.6265428</div>
<div class="sourceLine" id="cb29-13" data-line-number="13">## 1997-Clinton  0.6593018  0.6466030</div>
<div class="sourceLine" id="cb29-14" data-line-number="14">## 2001-Bush     0.6018113  0.6193608</div>
<div class="sourceLine" id="cb29-15" data-line-number="15">## 2005-Bush     0.5266249  0.5867178</div>
<div class="sourceLine" id="cb29-16" data-line-number="16">## 2017-Trump    0.5192075  0.5160104</div>
<div class="sourceLine" id="cb29-17" data-line-number="17"><span class="co"># dotchart(as.list(obamaSimil)$"2009-Obama", xlab = "Cosine similarity")</span></div></code></pre>
<p>We can use these distances to plot a dendrogram, clustering presidents:</p>
<pre class="sourceCode r" id="cb30"><code class="sourceCode r"><div class="sourceLine" id="cb30-1" data-line-number="1">
<span class="kw">data</span>(data_corpus_SOTU, <span class="dt">package =</span> <span class="st">"quantedaData"</span>)</div>
<div class="sourceLine" id="cb30-2" data-line-number="2">presDfm &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dfm.html">dfm</a></span>(<span class="kw"><a href="../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_SOTU, Date <span class="op">&gt;</span><span class="st"> </span><span class="kw">as.Date</span>(<span class="st">"1980-01-01"</span>)), </div>
<div class="sourceLine" id="cb30-3" data-line-number="3">               <span class="dt">stem =</span> <span class="ot">TRUE</span>, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>,</div>
<div class="sourceLine" id="cb30-4" data-line-number="4">               <span class="dt">remove =</span> <span class="kw"><a href="../reference/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>))</div>
<div class="sourceLine" id="cb30-5" data-line-number="5">presDfm &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dfm_trim.html">dfm_trim</a></span>(presDfm, <span class="dt">min_count =</span> <span class="dv">5</span>, <span class="dt">min_docfreq =</span> <span class="dv">3</span>)</div>
<div class="sourceLine" id="cb30-6" data-line-number="6"><span class="co"># hierarchical clustering - get distances on normalized dfm</span></div>
<div class="sourceLine" id="cb30-7" data-line-number="7">presDistMat &lt;-<span class="st"> </span><span class="kw"><a href="../reference/textstat_simil.html">textstat_dist</a></span>(<span class="kw"><a href="../reference/dfm_weight.html">dfm_weight</a></span>(presDfm, <span class="st">"relfreq"</span>))</div>
<div class="sourceLine" id="cb30-8" data-line-number="8"><span class="co"># hiarchical clustering the distance object</span></div>
<div class="sourceLine" id="cb30-9" data-line-number="9">presCluster &lt;-<span class="st"> </span><span class="kw">hclust</span>(presDistMat)</div>
<div class="sourceLine" id="cb30-10" data-line-number="10"><span class="co"># label with document names</span></div>
<div class="sourceLine" id="cb30-11" data-line-number="11">presCluster<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw"><a href="../reference/docnames.html">docnames</a></span>(presDfm)</div>
<div class="sourceLine" id="cb30-12" data-line-number="12"><span class="co"># plot as a dendrogram</span></div>
<div class="sourceLine" id="cb30-13" data-line-number="13">
<span class="kw">plot</span>(presCluster, <span class="dt">xlab =</span> <span class="st">""</span>, <span class="dt">sub =</span> <span class="st">""</span>, <span class="dt">main =</span> <span class="st">"Euclidean Distance on Normalized Token Frequency"</span>)</div></code></pre>
<p>(try it!)</p>
<p>We can also look at term similarities:</p>
<pre class="sourceCode r" id="cb31"><code class="sourceCode r"><div class="sourceLine" id="cb31-1" data-line-number="1">sim &lt;-<span class="st"> </span><span class="kw"><a href="../reference/textstat_simil.html">textstat_simil</a></span>(presDfm, <span class="kw">c</span>(<span class="st">"fair"</span>, <span class="st">"health"</span>, <span class="st">"terror"</span>), <span class="dt">method =</span> <span class="st">"cosine"</span>, <span class="dt">margin =</span> <span class="st">"features"</span>)</div>
<div class="sourceLine" id="cb31-2" data-line-number="2">
<span class="kw">lapply</span>(<span class="kw">as.list</span>(sim), head, <span class="dv">10</span>)</div>
<div class="sourceLine" id="cb31-3" data-line-number="3">## $fair</div>
<div class="sourceLine" id="cb31-4" data-line-number="4">##   economi     begin jefferson    author     faith      call   struggl      best     creat    courag </div>
<div class="sourceLine" id="cb31-5" data-line-number="5">## 0.9080252 0.9075951 0.8981462 0.8944272 0.8866586 0.8608285 0.8451543 0.8366600 0.8347300 0.8326664 </div>
<div class="sourceLine" id="cb31-6" data-line-number="6">## </div>
<div class="sourceLine" id="cb31-7" data-line-number="7">## $health</div>
<div class="sourceLine" id="cb31-8" data-line-number="8">##     shape   generat     wrong    common  knowledg    planet      task    demand       eye     defin </div>
<div class="sourceLine" id="cb31-9" data-line-number="9">## 0.9045340 0.8971180 0.8944272 0.8888889 0.8888889 0.8819171 0.8728716 0.8666667 0.8660254 0.8642416 </div>
<div class="sourceLine" id="cb31-10" data-line-number="10">## </div>
<div class="sourceLine" id="cb31-11" data-line-number="11">## $terror</div>
<div class="sourceLine" id="cb31-12" data-line-number="12">##    potenti  adversari commonplac     miracl     racial     bounti     martin      dream      polit   guarante </div>
<div class="sourceLine" id="cb31-13" data-line-number="13">##  0.9036961  0.9036961  0.8944272  0.8944272  0.8944272  0.8944272  0.8944272  0.8624394  0.8500000  0.8485281</div></code></pre>
</section><section id="scaling-document-positions" class="level2"><h2>Scaling document positions</h2>
<p>We have a lot of development work to do on the <code><a href="../reference/textmodel.html">textmodel()</a></code> function, but here is a demonstration of unsupervised document scaling comparing the “wordfish” model:</p>
<pre class="sourceCode r" id="cb32"><code class="sourceCode r"><div class="sourceLine" id="cb32-1" data-line-number="1"><span class="co"># make prettier document names</span></div>
<div class="sourceLine" id="cb32-2" data-line-number="2">ieDfm &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dfm.html">dfm</a></span>(data_corpus_irishbudget2010)</div>
<div class="sourceLine" id="cb32-3" data-line-number="3">
<span class="kw"><a href="../reference/textmodel_wordfish.html">textmodel_wordfish</a></span>(ieDfm, <span class="dt">dir =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">1</span>))</div>
<div class="sourceLine" id="cb32-4" data-line-number="4">## Fitted wordfish model:</div>
<div class="sourceLine" id="cb32-5" data-line-number="5">## Call:</div>
<div class="sourceLine" id="cb32-6" data-line-number="6">##  textmodel_wordfish.dfm(x = ieDfm, dir = c(2, 1))</div>
<div class="sourceLine" id="cb32-7" data-line-number="7">## </div>
<div class="sourceLine" id="cb32-8" data-line-number="8">## Estimated document positions:</div>
<div class="sourceLine" id="cb32-9" data-line-number="9">## </div>
<div class="sourceLine" id="cb32-10" data-line-number="10">##                                Documents      theta         SE       lower       upper</div>
<div class="sourceLine" id="cb32-11" data-line-number="11">## 1        2010_BUDGET_01_Brian_Lenihan_FF  1.8209515 0.02032340  1.78111764  1.86078539</div>
<div class="sourceLine" id="cb32-12" data-line-number="12">## 2       2010_BUDGET_02_Richard_Bruton_FG -0.5932794 0.02818841 -0.64852868 -0.53803010</div>
<div class="sourceLine" id="cb32-13" data-line-number="13">## 3         2010_BUDGET_03_Joan_Burton_LAB -1.1136773 0.01540261 -1.14386644 -1.08348821</div>
<div class="sourceLine" id="cb32-14" data-line-number="14">## 4        2010_BUDGET_04_Arthur_Morgan_SF -0.1219305 0.02846325 -0.17771844 -0.06614251</div>
<div class="sourceLine" id="cb32-15" data-line-number="15">## 5          2010_BUDGET_05_Brian_Cowen_FF  1.7724211 0.02364090  1.72608494  1.81875728</div>
<div class="sourceLine" id="cb32-16" data-line-number="16">## 6           2010_BUDGET_06_Enda_Kenny_FG -0.7145792 0.02650262 -0.76652430 -0.66263404</div>
<div class="sourceLine" id="cb32-17" data-line-number="17">## 7      2010_BUDGET_07_Kieran_ODonnell_FG -0.4844828 0.04171485 -0.56624389 -0.40272170</div>
<div class="sourceLine" id="cb32-18" data-line-number="18">## 8       2010_BUDGET_08_Eamon_Gilmore_LAB -0.5616697 0.02967363 -0.61982997 -0.50350934</div>
<div class="sourceLine" id="cb32-19" data-line-number="19">## 9     2010_BUDGET_09_Michael_Higgins_LAB -0.9703117 0.03850555 -1.04578262 -0.89484087</div>
<div class="sourceLine" id="cb32-20" data-line-number="20">## 10       2010_BUDGET_10_Ruairi_Quinn_LAB -0.9589240 0.03892387 -1.03521480 -0.88263324</div>
<div class="sourceLine" id="cb32-21" data-line-number="21">## 11     2010_BUDGET_11_John_Gormley_Green  1.1807221 0.07221451  1.03918164  1.32226250</div>
<div class="sourceLine" id="cb32-22" data-line-number="22">## 12       2010_BUDGET_12_Eamon_Ryan_Green  0.1866466 0.06294123  0.06328176  0.31001139</div>
<div class="sourceLine" id="cb32-23" data-line-number="23">## 13     2010_BUDGET_13_Ciaran_Cuffe_Green  0.7421914 0.07245429  0.60018101  0.88420184</div>
<div class="sourceLine" id="cb32-24" data-line-number="24">## 14 2010_BUDGET_14_Caoimhghin_OCaolain_SF -0.1840781 0.03666268 -0.25593697 -0.11221927</div>
<div class="sourceLine" id="cb32-25" data-line-number="25">## </div>
<div class="sourceLine" id="cb32-26" data-line-number="26">## Estimated feature scores: showing first 30 beta-hats for features</div>
<div class="sourceLine" id="cb32-27" data-line-number="27">## </div>
<div class="sourceLine" id="cb32-28" data-line-number="28">##            when               i       presented             the   supplementary          budget              to            this           house            last           april               , </div>
<div class="sourceLine" id="cb32-29" data-line-number="29">##     -0.09919906      0.38802809      0.39879679      0.25594866      1.11586806      0.09915913      0.37008362      0.30694003      0.19907549      0.28972231     -0.09525723      0.34535744 </div>
<div class="sourceLine" id="cb32-30" data-line-number="30">##            said              we           could            work             our             way         through          period              of          severe        economic        distress </div>
<div class="sourceLine" id="cb32-31" data-line-number="31">##     -0.71930529      0.47992774     -0.52975955      0.58227829      0.74373902      0.33612072      0.65983235      0.55622310      0.33932769      1.27911232      0.47867560      1.84455099 </div>
<div class="sourceLine" id="cb32-32" data-line-number="32">##               .           today             can          report            that notwithstanding </div>
<div class="sourceLine" id="cb32-33" data-line-number="33">##      0.27353061      0.17420320      0.36379034      0.69176698      0.08834025      1.84455099</div></code></pre>
</section><section id="topic-models" class="level2"><h2>Topic models</h2>
<p><strong>quanteda</strong> makes it very easy to fit topic models as well, e.g.:</p>
<pre class="sourceCode r" id="cb33"><code class="sourceCode r"><div class="sourceLine" id="cb33-1" data-line-number="1">quantdfm &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dfm.html">dfm</a></span>(data_corpus_irishbudget2010, </div>
<div class="sourceLine" id="cb33-2" data-line-number="2">                <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>, <span class="dt">remove_numbers =</span> <span class="ot">TRUE</span>, <span class="dt">remove =</span> <span class="kw"><a href="../reference/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>))</div>
<div class="sourceLine" id="cb33-3" data-line-number="3">quantdfm &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dfm_trim.html">dfm_trim</a></span>(quantdfm, <span class="dt">min_count =</span> <span class="dv">4</span>, <span class="dt">max_docfreq =</span> <span class="dv">10</span>, <span class="dt">verbose =</span> <span class="ot">TRUE</span>)</div>
<div class="sourceLine" id="cb33-4" data-line-number="4">## Removing features occurring:</div>
<div class="sourceLine" id="cb33-5" data-line-number="5">##   - fewer than 4 times: 3,527</div>
<div class="sourceLine" id="cb33-6" data-line-number="6">##   - in more than 10 documents: 72</div>
<div class="sourceLine" id="cb33-7" data-line-number="7">##   Total features removed: 3,599 (73.8%).</div>
<div class="sourceLine" id="cb33-8" data-line-number="8">quantdfm</div>
<div class="sourceLine" id="cb33-9" data-line-number="9">## Document-feature matrix of: 14 documents, 1,279 features (64.6% sparse).</div>
<div class="sourceLine" id="cb33-10" data-line-number="10"></div>
<div class="sourceLine" id="cb33-11" data-line-number="11">
<span class="cf">if</span> (<span class="kw">require</span>(topicmodels)) {</div>
<div class="sourceLine" id="cb33-12" data-line-number="12">    myLDAfit20 &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/topicmodels/topics/lda">LDA</a></span>(<span class="kw"><a href="../reference/convert.html">convert</a></span>(quantdfm, <span class="dt">to =</span> <span class="st">"topicmodels"</span>), <span class="dt">k =</span> <span class="dv">20</span>)</div>
<div class="sourceLine" id="cb33-13" data-line-number="13">    <span class="kw"><a href="http://www.rdocumentation.org/packages/topicmodels/topics/get">get_terms</a></span>(myLDAfit20, <span class="dv">5</span>)</div>
<div class="sourceLine" id="cb33-14" data-line-number="14">}</div>
<div class="sourceLine" id="cb33-15" data-line-number="15">## Loading required package: topicmodels</div>
<div class="sourceLine" id="cb33-16" data-line-number="16">##      Topic 1     Topic 2  Topic 3        Topic 4        Topic 5       Topic 6     Topic 7      Topic 8        Topic 9      Topic 10  Topic 11    Topic 12   Topic 13   Topic 14  Topic 15  Topic 16  </div>
<div class="sourceLine" id="cb33-17" data-line-number="17">## [1,] "day"       "fianna" "welfare"      "society"      "kind"        "taoiseach" "million"    "benefit"      "scheme"     "levy"    "failed"    "fianna"   "system"   "today"   "child"   "million" </div>
<div class="sourceLine" id="cb33-18" data-line-number="18">## [2,] "taoiseach" "fáil"   "fianna"       "enterprising" "imagination" "fine"      "support"    "families"     "investment" "million" "strategy"  "fáil"     "welfare"  "benefit" "benefit" "measures"</div>
<div class="sourceLine" id="cb33-19" data-line-number="19">## [3,] "back"      "side"   "government's" "sense"        "alternative" "gael"      "welfare"    "child"        "level"      "carbon"  "ministers" "national" "taxation" "savings" "day"     "spending"</div>
<div class="sourceLine" id="cb33-20" data-line-number="20">## [4,] "reduction" "level"  "stimulus"     "equal"        "moral"       "may"       "investment" "féin"         "reductions" "change"  "needed"    "irish"    "deficit"  "welfare" "bank"    "welfare" </div>
<div class="sourceLine" id="cb33-21" data-line-number="21">## [5,] "family"    "third"  "recovery"     "nation"       "citizenship" "local"     "back"       "government's" "changes"    "welfare" "vision"    "support"  "earners"  "society" "banks"   "review"  </div>
<div class="sourceLine" id="cb33-22" data-line-number="22">##      Topic 17    Topic 18    Topic 19  Topic 20  </div>
<div class="sourceLine" id="cb33-23" data-line-number="23">## [1,] "taoiseach" "care"      "society" "change"  </div>
<div class="sourceLine" id="cb33-24" data-line-number="24">## [2,] "employees" "welfare"   "like"    "creating"</div>
<div class="sourceLine" id="cb33-25" data-line-number="25">## [3,] "rate"      "per"       "fáil"    "sort"    </div>
<div class="sourceLine" id="cb33-26" data-line-number="26">## [4,] "referred"  "allowance" "today"   "families"</div>
<div class="sourceLine" id="cb33-27" data-line-number="27">## [5,] "debate"    "million"   "earners" "expected"</div></code></pre>
</section></section>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li>
<a href="#quanteda-features">quanteda Features</a><ul class="nav nav-pills nav-stacked">
<li><a href="#corpus-management-tools">Corpus management tools</a></li>
      <li><a href="#natural-language-processing-tools">Natural-Language Processing tools</a></li>
      <li><a href="#document-feature-matrix-analysis-tools">Document-Feature Matrix analysis tools</a></li>
      <li><a href="#additional-and-planned-features">Additional and planned features</a></li>
      <li><a href="#working-with-other-text-analysis-packages">Working with other text analysis packages</a></li>
      </ul>
</li>
      <li><a href="#how-to-install">How to Install</a></li>
      <li>
<a href="#creating-and-working-with-a-corpus">Creating and Working with a Corpus</a><ul class="nav nav-pills nav-stacked">
<li><a href="#currently-available-corpus-sources">Currently available corpus sources</a></li>
      <li><a href="#how-a-quanteda-corpus-works">How a quanteda corpus works</a></li>
      <li><a href="#tools-for-handling-corpus-objects">Tools for handling corpus objects</a></li>
      <li><a href="#exploring-corpus-texts">Exploring corpus texts</a></li>
      </ul>
</li>
      <li>
<a href="#extracting-features-from-a-corpus">Extracting Features from a Corpus</a><ul class="nav nav-pills nav-stacked">
<li><a href="#tokenizing-texts">Tokenizing texts</a></li>
      <li><a href="#constructing-a-document-frequency-matrix">Constructing a document-frequency matrix</a></li>
      </ul>
</li>
      <li>
<a href="#further-examples">Further Examples</a><ul class="nav nav-pills nav-stacked">
<li><a href="#similarities-between-texts">Similarities between texts</a></li>
      <li><a href="#scaling-document-positions">Scaling document positions</a></li>
      <li><a href="#topic-models">Topic models</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Kenneth Benoit.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
